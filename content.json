{"posts":[{"title":"C语言网络编程","text":"项目介绍：基于C语言的网络编程项目：图书管理系统服务端支持客户端远程登录TCP支持多用户同时访问(服务器并发 多进程)项目缺点：管理员用户与普通用户的区分用ID来区分 且只在客户端进行判断用户密码未进行加密数据库：使用了sqlite3，表为：user：id，passbook：id，name，author，note 功能介绍：功能1：管理员登录 管理员账号ID为1 只有一个1.添加图书2.修改图书3.查看所有图书 功能2：用户登录 D不为1的账号都为用户账号1.借阅图书（删除）2.查看所有图书3.用户注册 代码：编译时在后面加-lsqlite3:gcc -o server.c server -lsqlite3gcc -o client.c client -lsqlite3 编译后运行时在后面加上IP地址和端口号：./server 127.0.0.1 8888./client 127.0.0.1 8888 server.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320#include &quot;../include/serbook.h&quot;int main(int argc, char const *argv[]){ //数据库初始化 sqlite3 *sql_db=proc_init(); if (3 != argc) { printf(&quot;Usage : %s &lt;IP&gt; &lt;PORT&gt;\\n&quot;, argv[0]); exit(-1); } //创建套接字 int sockfd = socket_bind_listen(argv); //客户端信息的结构体 struct sockaddr_in client_addr; memset(&amp;client_addr, 0, sizeof(client_addr)); socklen_t client_addr_len = sizeof(client_addr); pid_t pid; int accept_fd; while (1) { accept_fd=accept(sockfd,(struct sockaddr *)&amp;client_addr, &amp;client_addr_len); printf(&quot;客户端[%s : %d]已连接\\n&quot;,inet_ntoa(client_addr.sin_addr),ntohs(client_addr.sin_port)); if (0&gt;(pid=fork())) ERRLOG(&quot;fork error&quot;); else if (0==pid) { child_do(accept_fd,sql_db); } else { if (signal(SIGCHLD, deal_signal) == SIG_ERR) ERRLOG(&quot;signal error&quot;); close(accept_fd); } } //关闭监听套接字 close(sockfd); return 0;}// 数据库初始化sqlite3 *proc_init(void){ //打开数据库文件 sqlite3 *sql_db=NULL; int ret=sqlite3_open(FILEname,&amp;sql_db); if (ret!=SQLITE_OK) { printf(&quot;打开数据库文件 失败&quot;); printf(&quot;errcode[%d] errmsg[%s]\\n&quot;, ret, sqlite3_errmsg(sql_db)); exit(-1); } //2建表 char sql_rbuf[256]=&quot;CREATE TABLE IF NOT EXISTS user(id INT PRIMARY KEY, pass TEXT)&quot;; ret=sqlite3_exec(sql_db,sql_rbuf,NULL,NULL,NULL); if (ret!=SQLITE_OK) { perror(&quot;建user表 失败&quot;); printf(&quot;errcode[%d] errmsg[%s]\\n&quot;, ret, sqlite3_errmsg(sql_db)); exit(-1); } //图书ID-图书名字-图书作者-图书备注 char sql_ubuf[256]=&quot;CREATE TABLE IF NOT EXISTS book(id INT PRIMARY KEY,name TEXT,author TEXT,note TEXT)&quot;; ret=sqlite3_exec(sql_db,sql_ubuf,NULL,NULL,NULL); if (ret!=SQLITE_OK) { perror(&quot;建book表 失败&quot;); printf(&quot;errcode[%d] errmsg[%s]\\n&quot;, ret, sqlite3_errmsg(sql_db)); exit(-1); } return sql_db;}//3. 创建套接字int socket_bind_listen(const char *argv[]){ int sockfd=socket(AF_INET,SOCK_STREAM,0); if (-1==sockfd) ERRLOG(&quot;创建套接字 失败&quot;); struct sockaddr_in server_addr; memset(&amp;server_addr,0,sizeof(server_addr)); server_addr.sin_family=AF_INET; server_addr.sin_port=htons(atoi(argv[2])); server_addr.sin_addr.s_addr=inet_addr(argv[1]); socklen_t server_addr_len=sizeof(server_addr); if (-1==bind(sockfd,(struct sockaddr *)&amp;server_addr,server_addr_len)) ERRLOG(&quot;sockaddr error&quot;); if (-1 == listen(sockfd, 10)) ERRLOG(&quot;listen error&quot;); return sockfd;}void child_do(int accept_fd, sqlite3 *sql_db){ MSG msg; memset(&amp;msg,0,sizeof(MSG)); while (recv(accept_fd, &amp;msg, sizeof(MSG), 0) &gt; 0) { printf(&quot;type = %d\\n&quot;, msg.type); switch (msg.type) { case A: //增加 do_add_s(accept_fd, &amp;msg, sql_db); break; case D: //删除 do_delete_s(accept_fd, &amp;msg, sql_db); break; case M: //修改 do_modify_s(accept_fd, &amp;msg, sql_db); break; case R: // 注册 do_register_s(accept_fd, &amp;msg, sql_db); break; case L: // 登录 do_login_s(accept_fd, &amp;msg, sql_db); break; case Qall: // 查询所有 all_query_s(accept_fd,sql_db); break; } } printf(&quot;客户端 退出\\n&quot;); exit(0);}// 信号处理函数void deal_signal(int s){ wait(NULL); }// 注册void do_register_s(int accept_fd, MSG *msg, sqlite3 *sql_db){ char sql_buf[512]; memset(sql_buf,0,sizeof(sql_buf)); sprintf(sql_buf,&quot;INSERT INTO user(id,pass) VALUES(%d,'%s')&quot;, msg-&gt;id, msg-&gt;pass); int ret=sqlite3_exec(sql_db,sql_buf,NULL,NULL,NULL); if (ret!=SQLITE_OK) { perror(&quot;注册失败&quot;); printf(&quot;errcode[%d] errmsg[%s]\\n&quot;, ret, sqlite3_errmsg(sql_db)); sprintf(msg-&gt;data, &quot;ID %d 已经存在&quot;, msg-&gt;id); } else { strcpy(msg-&gt;data, &quot;注册成功&quot;); } //发送数据 if (0 &gt;= send(accept_fd,msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;);}//登陆void do_login_s(int accept_fd, MSG *msg, sqlite3 *sql_db){ char sql_buf[256]={0}; //使用查询函数判断是否存在 sprintf(sql_buf,&quot;SELECT * FROM user WHERE id=%d AND pass='%s'&quot;, msg-&gt;id, msg-&gt;pass); char **result; int row = 0; int column = 0; int ret=sqlite3_get_table(sql_db,sql_buf,&amp;result,&amp;row,&amp;column,NULL); if (ret!=SQLITE_OK) { perror(&quot;查询失败&quot;); printf(&quot;errcode[%d] errmsg[%s]\\n&quot;, ret, sqlite3_errmsg(sql_db)); } if (0==row) { sprintf(msg-&gt;data,&quot;ID[%d]与密码[%s]不一致&quot;, msg-&gt;id,msg-&gt;pass); } else { strcpy(msg-&gt;data, &quot;登录成功&quot;); } //发送数据 if (0 &gt;= send(accept_fd, msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;);}// 查询所有void all_query_s(int accept_fd,sqlite3 *sql_db){ MSG msg; int i,x; char sql_buf[256]={0}; memset(&amp;msg,0,sizeof(msg)); //使用查询函数 strcpy(sql_buf,&quot;SELECT * FROM book&quot;); char **result; int row = 0; int column = 0; int ret=sqlite3_get_table(sql_db,sql_buf,&amp;result,&amp;row,&amp;column,NULL); if (ret!=SQLITE_OK) { perror(&quot;查询失败&quot;); printf(&quot;errcode[%d] errmsg[%s]\\n&quot;, ret, sqlite3_errmsg(sql_db)); } if (0==row) { sprintf(msg.data,&quot;ID[%d]为空&quot;, 0); } else { x=column; for (i= 0; i&lt;row; i++) { if (result[x]) { msg.id=atoi(result[x]); } x++; snprintf(msg.name,sizeof(msg.name),&quot;%s&quot;,result[x++]); snprintf(msg.author,sizeof(msg.author),&quot;%s&quot;,result[x++]); snprintf(msg.note,sizeof(msg.note),&quot;%s&quot;,result[x++]); //发送数据 if (0 &gt;= send(accept_fd,&amp;msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); memset(&amp;msg,0,sizeof(msg)); if (row==(i+1)) { strcpy(msg.data,&quot;**over**&quot;); //发送数据 if (0 &gt;= send(accept_fd,&amp;msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); } } } sqlite3_free_table(result);}// 增加void do_add_s(int accept_fd, MSG *msg, sqlite3 *sql_db){ char sql_buf[512]; memset(sql_buf,0,sizeof(sql_buf)); sprintf(sql_buf,&quot;INSERT INTO book(id,name,author,note) VALUES(%d,'%s','%s','%s')&quot;, msg-&gt;id, msg-&gt;name,msg-&gt;author,msg-&gt;note); int ret=sqlite3_exec(sql_db,sql_buf,NULL,NULL,NULL); if (ret!=SQLITE_OK) { perror(&quot;添加失败&quot;); printf(&quot;errcode[%d] errmsg[%s]\\n&quot;, ret, sqlite3_errmsg(sql_db)); sprintf(msg-&gt;data, &quot;ID为 %d 的图书已经存在&quot;, msg-&gt;id); } else { strcpy(msg-&gt;data, &quot;添加成功&quot;); } //发送数据 if (0 &gt;= send(accept_fd,msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;);}//删除void do_delete_s(int accept_fd, MSG *msg, sqlite3 *sql_db){ char sql_buf[256]={0}; //填写sql语句 sprintf(sql_buf,&quot;DELETE FROM book WHERE id=%d&quot;,msg-&gt;id); //执行sql语句 int ret = sqlite3_exec(sql_db, sql_buf, NULL, NULL, NULL); if (ret!=SQLITE_OK) { perror(&quot;查询失败&quot;); printf(&quot;errcode[%d] errmsg[%s]\\n&quot;, ret, sqlite3_errmsg(sql_db)); } else { strcpy(msg-&gt;data, &quot;借阅成功&quot;); } //发送数据 if (0 &gt;= send(accept_fd, msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); memset(msg,0,sizeof(MSG));}// 修改void do_modify_s(int accept_fd, MSG *msg, sqlite3 *sql_db){ char sql_buff[512] = {0}; // pass ,name ,sex ,age,pay,job sprintf(sql_buff,&quot;UPDATE book SET name='%s',author='%s',note='%s' WHERE id=%d&quot;, msg-&gt;name,msg-&gt;author,msg-&gt;note,msg-&gt;id); //执行sql语句 int ret = sqlite3_exec(sql_db, sql_buff, NULL, NULL, NULL); if (ret != SQLITE_OK) { perror(&quot;修改失败&quot;); printf(&quot;返回值[%d] 错误信息[%s]\\n&quot;, ret, sqlite3_errmsg(sql_db)); exit(-1); } strcpy(msg-&gt;data, &quot;修改成功&quot;); //发送数据 if (0 &gt;= send(accept_fd,msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); memset(msg,0,sizeof(MSG));} serbook.h12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#ifndef __SERBOOK_H__#define __SERBOOK_H__#include &lt;stdio.h&gt;#include &lt;sqlite3.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt; // memset#include &lt;sys/types.h&gt; #include &lt;sys/socket.h&gt;#include &lt;netinet/in.h&gt; // 信息结构体struct sockaddr_in#include &lt;signal.h&gt;#include &lt;netinet/in.h&gt; //inet_aton#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt; // fork#include &lt;sys/wait.h&gt;/*数据库文件名字*/#define FILEname &quot;ser.db&quot;#define ERRLOG(errmsg) \\ do \\ { \\ printf(&quot;%s--%s(%d):&quot;, __FILE__, __func__, __LINE__); \\ perror(errmsg); \\ } while (0)#define R 1 // 注册#define L 2 // 登录#define M 4 // 修改#define A 5 // 增加#define D 6 // 删除#define Qall 7 // 查询所有//信息结构体typedef struct{ int type; //选择 int id; //用户ID char name[64]; //图书名字 char pass[64]; // password密码 char data[256]; //emark返回数据 char author[64]; //图书作者 char note[256]; //图书备注}MSG;sqlite3 *proc_init(void);int socket_bind_listen(const char *argv[]);void child_do(int accept_fd, sqlite3 *sql_db);void deal_signal(int s);void do_register_s(int accept_fd, MSG *msg, sqlite3 *sql_db);void do_login_s(int accept_fd, MSG *msg, sqlite3 *sql_db);void all_query_s(int accept_fd,sqlite3 *sql_db);void do_add_s(int accept_fd, MSG *msg, sqlite3 *sql_db);void do_delete_s(int accept_fd, MSG *msg, sqlite3 *sql_db);void do_modify_s(int accept_fd, MSG *msg, sqlite3 *sql_db);#endif client.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320#include &quot;../include/clibook.h&quot;int errnum=0;int main(int argc, char const *argv[]){ int ret; if (3 != argc) { printf(&quot;Usage : %s &lt;IP&gt; &lt;PORT&gt;\\n&quot;, argv[0]); exit(-1); } // 1. 创建套接字 int sockfd = socket_connect(argv); MSG msg; memset(&amp;msg, 0, sizeof(MSG)); int n; while (1) { printf(&quot;=====================================\\n&quot;); printf(&quot;= 1.管理员登录 =\\n&quot;); printf(&quot;= 2.用户登录 =\\n&quot;); printf(&quot;= 3.用户注册 =\\n&quot;); printf(&quot;= 4.退出 =\\n&quot;); printf(&quot;======================================\\n&quot;); printf(&quot;请输入选项: &quot;); scanf(&quot;%d&quot;, &amp;n); switch (n) { case 1: do_login(sockfd, &amp;msg); if(msg.id==1) { goto next; } else{ printf(&quot;该账号非管理员账号\\n&quot;); } break; case 2: do_login(sockfd, &amp;msg); if(msg.id!=1) { goto next2; } else{ printf(&quot;该账号为管理员账号\\n&quot;); } break; case 3: do_register(sockfd, &amp;msg); break; case 4: exit(0); break; } }next: while (1) { printf(&quot;=====================================\\n&quot;); printf(&quot;= 1.添加图书 =\\n&quot;); printf(&quot;= 2.修改图书 =\\n&quot;); printf(&quot;= 3.查看所有图书 =\\n&quot;); printf(&quot;= 4.退出 =\\n&quot;); printf(&quot;=====================================\\n&quot;); printf(&quot;请输入选项: &quot;); scanf(&quot;%d&quot;, &amp;n); switch (n) { case 1: //添加图书 do_add(sockfd, &amp;msg); break; case 2: //修改图书 do_modify(sockfd, &amp;msg); break; case 3: //查看所有图书 all_query(sockfd, &amp;msg); break; case 4: exit(-1); break; } }next2: while (1) { printf(&quot;=====================================\\n&quot;); printf(&quot;= 1.借阅图书 =\\n&quot;); printf(&quot;= 2.查看所有图书 =\\n&quot;); printf(&quot;= 3.退出 =\\n&quot;); printf(&quot;=====================================\\n&quot;); printf(&quot;请输入选项: &quot;); scanf(&quot;%d&quot;, &amp;n); switch (n) { case 1: //借阅图书（删除） do_delete(sockfd, &amp;msg); break; case 2: //查看所有图书 all_query(sockfd, &amp;msg); break; case 3: exit(-1); break; } } close(sockfd); return 0;}// 创建套接字int socket_connect(const char *argv[]){ int sockfd = socket(AF_INET, SOCK_STREAM, 0); if (-1 == sockfd) ERRLOG(&quot;创建套接字失败&quot;); struct sockaddr_in server_addr; memset(&amp;server_addr, 0, sizeof(server_addr)); server_addr.sin_family = AF_INET; server_addr.sin_port = htons(atoi(argv[2])); server_addr.sin_addr.s_addr = inet_addr(argv[1]); socklen_t server_addr_len = sizeof(server_addr); //与服务器建立连接 if (-1 == connect(sockfd, (struct sockaddr *)&amp;server_addr, server_addr_len)) { ERRLOG(&quot;listen error&quot;); exit(-1); } printf(&quot;---连接服务器成功---\\n&quot;); return sockfd;}// 1.注册void do_register(int sockfd, MSG *msg){ memset(msg, 0, sizeof(MSG)); msg-&gt;type = R; printf(&quot;输入ID: &quot;); scanf(&quot;%d&quot;, &amp;msg-&gt;id); printf(&quot;输入密码: &quot;); scanf(&quot;%s&quot;, msg-&gt;pass); //发送数据 if (0 &gt;= send(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); //接收数据并输出 if (0 &gt;= recv(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); printf(&quot;%s\\n&quot;, msg-&gt;data);}// 2.登录int do_login(int sockfd, MSG *msg){ char NO[32] = &quot;n&quot;; char unlogin[128]={0}; msg-&gt;type = L; printf(&quot;输入ID: &quot;); scanf(&quot;%d&quot;, &amp;msg-&gt;id); printf(&quot;输入密码: &quot;); scanf(&quot;%s&quot;, msg-&gt;pass); //发送数据 if (0 &gt;= send(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;send error ?&quot;); //接收数据并输出 if (0 &gt;= recv(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;recv error&quot;); printf(&quot;%s\\n&quot;, msg-&gt;data); sprintf(unlogin,&quot;ID[%d]与密码[%s]不一致&quot;, msg-&gt;id,msg-&gt;pass); if (strcmp(msg-&gt;data,unlogin)== 0) { errnum++; if (3==errnum) { errnum=0; exit(0); } } if (strcmp(msg-&gt;data,&quot;登陆成功&quot;) == 0) { printf(&quot;登陆成功&quot;); } return 0;}// 7. 查询所有void all_query(int sockfd, MSG *msg){ memset(msg, 0, sizeof(MSG)); int flag=0; char zoor[64]={0}; sprintf(zoor,&quot;ID[%d]为空&quot;, 0); msg-&gt;type = Qall; //发送数据 if (0 &gt;= send(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); while (1) { //接收数据并输出 if (0 &gt;= recv(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;recv error&quot;); if (strcmp(msg-&gt;data, zoor) == 0) { printf(&quot;%s\\n&quot;, msg-&gt;data); } if (strcmp(msg-&gt;data,&quot;**over**&quot;) == 0) { printf(&quot;输出成功\\n&quot;); break; } else { if (0==flag) { printf(&quot;ID| NAME | AUTHOR | NOTE |\\n&quot;); flag=1; } printf(&quot;%d %s %s %s\\n&quot;, msg-&gt;id, msg-&gt;name, msg-&gt;author, msg-&gt;note); memset(msg, 0, sizeof(MSG)); } } flag=0;}// 增加图书void do_add(int sockfd, MSG *msg){ memset(msg, 0, sizeof(MSG)); msg-&gt;type = A; printf(&quot;输入图书ID:&quot;); scanf(&quot;%d&quot;, &amp;msg-&gt;id); printf(&quot;输入图书名字:&quot;); scanf(&quot;%s&quot;, msg-&gt;name); printf(&quot;输入作者名字:&quot;); scanf(&quot;%s&quot;, msg-&gt;author); printf(&quot;输入图书备注:&quot;); scanf(&quot;%s&quot;, msg-&gt;note); //发送数据 if (0 &gt;= send(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); //接收数据并输出 if (0 &gt;= recv(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); printf(&quot;%s\\n&quot;, msg-&gt;data);}//删除void do_delete(int sockfd, MSG *msg){ printf(&quot;输入要借阅图书的ID: &quot;); scanf(&quot;%d&quot;, &amp;msg-&gt;id); msg-&gt;type = D; //发送数据 if (0 &gt;= send(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); //接收数据并输出 if (0 &gt;= recv(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;recv error&quot;); printf(&quot;%s\\n&quot;, msg-&gt;data);}// 修改void do_modify(int sockfd, MSG *msg){ printf(&quot;输入修改要修改的图书ID: &quot;); scanf(&quot;%d&quot;, &amp;msg-&gt;id); char NO[32] = &quot;n&quot;; int flag=0; msg-&gt;type = M; printf(&quot;开始修改图书ID: [%d] 信息\\n&quot;, msg-&gt;id); printf(&quot;修改图书名称(y/n): &quot;); scanf(&quot;%s&quot;, NO); if (strcmp(NO, &quot;y&quot;) == 0 || strcmp(NO, &quot;Y&quot;) == 0) { memset(msg-&gt;name, 0, sizeof(msg-&gt;name)); printf(&quot;新名称: &quot;); scanf(&quot;%s&quot;, msg-&gt;name); flag=1; } printf(&quot;修改图书作者(y/n): &quot;); scanf(&quot;%s&quot;, NO); if (strcmp(NO, &quot;y&quot;) == 0 || strcmp(NO, &quot;Y&quot;) == 0) { memset(msg-&gt;author, 0, sizeof(msg-&gt;author)); printf(&quot;新作者: &quot;); scanf(&quot;%s&quot;, msg-&gt;author); flag=1; } printf(&quot;修改图书备注(y/n): &quot;); scanf(&quot;%s&quot;, NO); if (strcmp(NO, &quot;y&quot;) == 0 || strcmp(NO, &quot;Y&quot;) == 0) { memset(msg-&gt;note, 0, sizeof(msg-&gt;note)); printf(&quot;新备注: &quot;); scanf(&quot;%s&quot;, msg-&gt;note); flag=1; } if (0==flag) { printf(&quot;没有任何修改\\n&quot;); } else { //发送数据 if (0 &gt;= send(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;send error&quot;); //接收数据并输出 if (0 &gt;= recv(sockfd, msg, sizeof(MSG), 0)) ERRLOG(&quot;recv error&quot;); if (strcmp(msg-&gt;data, &quot;修改成功&quot;) == 0) { printf(&quot;%s\\n&quot;, msg-&gt;data); } }} clibook.h12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#ifndef __CLIBOOK_H__#define __CLIBOOK_H__#include &lt;stdio.h&gt;#include &lt;sqlite3.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt; // memset#include &lt;sys/types.h&gt; #include &lt;sys/socket.h&gt;#include &lt;netinet/in.h&gt; // 信息结构体struct sockaddr_in#include &lt;signal.h&gt;#include &lt;netinet/in.h&gt; //inet_aton#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt; #define ERRLOG(errmsg) \\ do \\ { \\ printf(&quot;%s--%s(%d):&quot;, __FILE__, __func__, __LINE__); \\ perror(errmsg); \\ } while (0)#define R 1 // 注册#define L 2 // 登录#define M 4 // 修改#define A 5 // 增加#define D 6 // 删除#define Qall 7 // 查询所有#define N 32//信息结构体typedef struct{ int type; //选择 int id; //用户ID char name[64]; //图书名字 char pass[64]; // password密码 char data[256]; //emark返回数据 char author[64]; //图书作者 char note[256]; //图书备注}MSG;int socket_connect(const char *argv[]);void do_register(int sockfd, MSG *msg);int do_login(int sockfd, MSG *msg);void all_query(int sockfd, MSG *msg);void do_add(int sockfd, MSG *msg);void do_delete(int sockfd, MSG *msg);void do_modify(int sockfd, MSG *msg);#endif","link":"/posts/undefined.html"}],"tags":[{"name":"C","slug":"C","link":"/tags/C/"}],"categories":[{"name":"C语言","slug":"C语言","link":"/categories/C%E8%AF%AD%E8%A8%80/"}],"pages":[{"title":"关于","text":"还没有想好怎么写","link":"/about/index.html"},{"title":"友情链接","text":"还没有想好怎么写","link":"/friends/index.html"},{"title":"留言板","text":"有什么想说的就写下来吧────────────────────────────────────────████████──████████─████████──████████──██░░░░██──██░░░░██─██░░░░██──██░░░░██──████░░██──██░░████─████░░██──██░░████────██░░░░██░░░░██─────██░░░░██░░░░██──────████░░░░░░████─────████░░░░░░████────────██░░░░░░██─────────████░░████────────████░░░░░░████─────────██░░██──────────██░░░░██░░░░██─────────██░░██────────████░░██──██░░████───────██░░██────────██░░░░██──██░░░░██───────██░░██────────████████──████████───────██████───────","link":"/messages/index.html"},{"title":"","text":"/*! For license information please see twikoo.all.min.js.LICENSE.txt */ var e,t;e=this,t=function(){return function(){var e={3485:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var r=n(8190);Object.keys(r).forEach((function(e){\"default\"!==e&&\"__esModule\"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var i=n(9565);Object.keys(i).forEach((function(e){\"default\"!==e&&\"__esModule\"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}))},8190:function(e,t){\"use strict\";var n;Object.defineProperty(t,\"__esModule\",{value:!0}),t.StorageType=t.AbstractStorage=t.AbstractSDKRequest=void 0,t.StorageType=n,function(e){e.local=\"local\",e.none=\"none\",e.session=\"session\"}(n||(t.StorageType=n={}));var r=function(){};t.AbstractSDKRequest=r;var i=function(){};t.AbstractStorage=i},9565:function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.formatUrl=function(e,t,n){void 0===n&&(n={});var r=/\\?/.test(t),i=\"\";for(var o in n)\"\"===i?!r&&(t+=\"?\"):i+=\"&\",i+=o+\"=\"+encodeURIComponent(n[o]);return/^http(s)?\\:\\/\\//.test(t+=i)?t:\"\"+e+t}},8152:function(e,t,n){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.LOGINTYPE=t.DATA_VERSION=void 0,t.getEndPoint=function(){return{BASE_URL:l,PROTOCOL:c}},t.getSdkName=function(){return s},t.getSdkVersion=function(){return a},t.setEndPoint=d,t.setRegionLevelEndpoint=function(e,t,n){d(t?\"//\"+e+\".\"+t+\".tcb-api.tencentcloudapi.com/web\":\"//\"+e+\".ap-shanghai.tcb-api.tencentcloudapi.com/web\",n)},t.setSdkName=function(e){s=e,i(e)},t.setSdkVersion=function(e){a=e};var r=n(5508),i=r.constants.setSdkName,o=r.constants.setProtocol,a=\"\",s=\"@cloudbase/js-sdk\";t.DATA_VERSION=\"2020-01-10\";var u,c=\"undefined\"!=typeof location&&\"http:\"===location.protocol?\"http:\":\"https:\",l=\"//tcb-api.tencentcloudapi.com/web\";function d(e,t){l=e,t&&(c=t,o(t))}t.LOGINTYPE=u,function(e){e.ANONYMOUS=\"ANONYMOUS\",e.WECHAT=\"WECHAT\",e.CUSTOM=\"CUSTOM\",e.NULL=\"NULL\"}(u||(t.LOGINTYPE=u={}))},6631:function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0}),t.EVENTS=void 0,t.EVENTS={LOGIN_STATE_CHANGED:\"loginStateChanged\",LOGIN_STATE_EXPIRED:\"loginStateExpire\",LOGIN_TYPE_CHANGED:\"loginTypeChanged\",ANONYMOUS_CONVERTED:\"anonymousConverted\",ACCESS_TOKEN_REFRESHD:\"refreshAccessToken\"}},2183:function(e,t,n){\"use strict\";var r=n(3330);Object.defineProperty(t,\"__esModule\",{value:!0}),t[\"default\"]=t.cloudbase=void 0;var i=r(n(9767)),o=n(5508),a=r(n(9636)),s=n(9540),u=n(2341),c=n(6592),l=n(437),d=n(8152),f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n3&&s&&Object.defineProperty(t,n,s),s},h=function(e,t){if(\"object\"===(\"undefined\"==typeof Reflect?\"undefined\":(0,i[\"default\"])(Reflect))&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)},g=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r[\"throw\"](e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},m=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),\"throw\":s(1),\"return\":s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError(\"Generator is already executing.\");for(;a;)try{if(n=1,r&&(i=2&o[0]?r[\"return\"]:o[0]?r[\"throw\"]||((i=r[\"return\"])&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join(\"\")},parse:function(e){for(var t=e.length,n=[],r=0;r>>3]|=parseInt(e.substr(r,2),16)2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join(\"\")},parse:function(e){for(var t=e.length,n=[],r=0;r>>2]|=(255&e.charCodeAt(r))>>24-o%4*8&255)>2]>>>24-(o+1)%4*8&255)>2]>>>24-(o+2)%4*8&255,s=0;s>6*(3-s)&63));var u=r.charAt(64);if(u)for(;i.length%4;)i.push(u);return i.join(\"\")},parse:function(e){var t=e.length,r=this._map,i=this._reverseMap;if(!i){i=this._reverseMap=[];for(var o=0;o>>2]|=(s|u)19)^m>>>10;c[p]=g+c[p-7]+v+c[p-16]}var _=r&i^r&o^i&o,y=(r>2)^(r>13)^(r>22),b=f+((s>6)^(s>11)^(s>25))+(s&l^~s&d)+u[p]+c[p];f=d,d=l,l=s,s=a+b|0,a=o,o=i,i=r,r=b+(y+_)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128>9>92&&arguments[2]!==undefined?arguments[2]:null;u||(u=document.createElement(\"textarea\"),document.body.appendChild(u));var r=function(e){var t=window.getComputedStyle(e),n=t.getPropertyValue(\"box-sizing\"),r=parseFloat(t.getPropertyValue(\"padding-bottom\"))+parseFloat(t.getPropertyValue(\"padding-top\")),i=parseFloat(t.getPropertyValue(\"border-bottom-width\"))+parseFloat(t.getPropertyValue(\"border-top-width\"));return{contextStyle:l.map((function(e){return e+\":\"+t.getPropertyValue(e)})).join(\";\"),paddingSize:r,borderSize:i,boxSizing:n}}(e),i=r.paddingSize,o=r.borderSize,a=r.boxSizing,s=r.contextStyle;u.setAttribute(\"style\",s+\";\"+c),u.value=e.value||e.placeholder||\"\";var d=u.scrollHeight,f={};\"border-box\"===a?d+=o:\"content-box\"===a&&(d-=i),u.value=\"\";var p=u.scrollHeight-i;if(null!==t){var h=p*t;\"border-box\"===a&&(h=h+i+o),d=Math.max(h,d),f.minHeight=h+\"px\"}if(null!==n){var g=p*n;\"border-box\"===a&&(g=g+i+o),d=Math.min(g,d)}return f.height=d+\"px\",u.parentNode&&u.parentNode.removeChild(u),u=null,f}var f=n(9),p=n.n(f),h=n(21),g={name:\"ElInput\",componentName:\"ElInput\",mixins:[o.a,s.a],inheritAttrs:!1,inject:{elForm:{\"default\":\"\"},elFormItem:{\"default\":\"\"}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,\"default\":\"text\"},autosize:{type:[Boolean,Object],\"default\":!1},autocomplete:{type:String,\"default\":\"off\"},autoComplete:{type:String,validator:function(e){return!0}},validateEvent:{type:Boolean,\"default\":!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,\"default\":!1},showPassword:{type:Boolean,\"default\":!1},showWordLimit:{type:Boolean,\"default\":!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:\"\"},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:\"el-icon-loading\",success:\"el-icon-circle-check\",error:\"el-icon-circle-close\"}[this.validateState]},textareaStyle:function(){return p()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||this.value===undefined?\"\":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&(\"text\"===this.type||\"textarea\"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return\"number\"==typeof this.value?String(this.value).length:(this.value||\"\").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(e){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch(\"ElFormItem\",\"el.form.change\",[e])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var e=this;this.$nextTick((function(){e.setNativeInputValue(),e.resizeTextarea(),e.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:\"icon is removed, use suffix-icon / prefix-icon instead.\",\"on-icon-click\":\"on-icon-click is removed.\"},events:{click:\"click is removed.\"}}},handleBlur:function(e){this.focused=!1,this.$emit(\"blur\",e),this.validateEvent&&this.dispatch(\"ElFormItem\",\"el.form.blur\",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var e=this.autosize;if(\"textarea\"===this.type)if(e){var t=e.minRows,n=e.maxRows;this.textareaCalcStyle=d(this.$refs.textarea,t,n)}else this.textareaCalcStyle={minHeight:d(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var e=this.getInput();e&&e.value!==this.nativeInputValue&&(e.value=this.nativeInputValue)},handleFocus:function(e){this.focused=!0,this.$emit(\"focus\",e)},handleCompositionStart:function(e){this.$emit(\"compositionstart\",e),this.isComposing=!0},handleCompositionUpdate:function(e){this.$emit(\"compositionupdate\",e);var t=e.target.value,n=t[t.length-1]||\"\";this.isComposing=!Object(h.isKorean)(n)},handleCompositionEnd:function(e){this.$emit(\"compositionend\",e),this.isComposing&&(this.isComposing=!1,this.handleInput(e))},handleInput:function(e){this.isComposing||e.target.value!==this.nativeInputValue&&(this.$emit(\"input\",e.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(e){this.$emit(\"change\",e.target.value)},calcIconOffset:function(e){var t=[].slice.call(this.$el.querySelectorAll(\".el-input__\"+e)||[]);if(t.length){for(var n=null,r=0;r0&&arguments[0]!==undefined?arguments[0]:{};if(!i.a.prototype.$isServer){if(\"string\"==typeof(e=_()({},b,e)).target&&(e.target=document.querySelector(e.target)),e.target=e.target||document.body,e.target!==document.body?e.fullscreen=!1:e.body=!0,e.fullscreen&&k)return k;var t=e.body?document.body:e.target,n=new y({el:document.createElement(\"div\"),data:e});return w(e,t,n),\"absolute\"!==n.originalPosition&&\"fixed\"!==n.originalPosition&&\"sticky\"!==n.originalPosition&&Object(l.addClass)(t,\"el-loading-parent--relative\"),e.fullscreen&&e.lock&&Object(l.addClass)(t,\"el-loading-parent--hidden\"),t.appendChild(n.$el),i.a.nextTick((function(){n.visible=!0})),e.fullscreen&&(k=n),n}};t[\"default\"]={install:function(e){e.use(m),e.prototype.$loading=E},directive:m,service:E}},9:function(e,t){e.exports=n(7002)}})},6262:function(e,t){\"use strict\";function n(e,t,r){this.$children.forEach((function(i){i.$options.componentName===e?i.$emit.apply(i,[t].concat(r)):n.apply(i,[e,t].concat([r]))}))}t.__esModule=!0,t[\"default\"]={methods:{dispatch:function(e,t,n){for(var r=this.$parent||this.$root,i=r.$options.componentName;r&&(!i||i!==e);)(r=r.$parent)&&(i=r.$options.componentName);r&&r.$emit.apply(r,[t].concat(n))},broadcast:function(e,t,r){n.call(this,e,t,r)}}}},7177:function(e,t,n){\"use strict\";t.__esModule=!0,n(964),t[\"default\"]={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},3751:function(e,t){\"use strict\";t.__esModule=!0,t[\"default\"]=function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:300,r=arguments.length>3&&arguments[3]!==undefined&&arguments[3];if(!e||!t)throw new Error(\"instance & callback is required\");var i=!1,o=function(){i||(i=!0,t&&t.apply(null,arguments))};r?e.$once(\"after-leave\",o):e.$on(\"after-leave\",o),setTimeout((function(){o()}),n+100)}},4210:function(e,t,n){\"use strict\";var r=n(3330)(n(9767));t.__esModule=!0,t.isInContainer=t.getScrollContainer=t.isScroll=t.getStyle=t.once=t.off=t.on=undefined;var i=\"function\"==typeof Symbol&&\"symbol\"===(0,r[\"default\"])(Symbol.iterator)?function(e){return(0,r[\"default\"])(e)}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":(0,r[\"default\"])(e)};t.hasClass=g,t.addClass=function(e,t){if(e){for(var n=e.className,r=(t||\"\").split(\" \"),i=0,o=r.length;i=0;i--)if(t[i].id===e){t.splice(i,1);break}}0===t.length&&(this.modalFade&&(0,a.addClass)(n,\"v-modal-leave\"),setTimeout((function(){0===t.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display=\"none\",f.modalDom=undefined),(0,a.removeClass)(n,\"v-modal-leave\")}),200))}};Object.defineProperty(f,\"zIndex\",{configurable:!0,get:function(){return u||(c=c||(o[\"default\"].prototype.$ELEMENT||{}).zIndex||2e3,u=!0),c},set:function(e){c=e}}),o[\"default\"].prototype.$isServer||window.addEventListener(\"keydown\",(function(e){if(27===e.keyCode){var t=function(){if(!o[\"default\"].prototype.$isServer&&f.modalStack.length>0){var e=f.modalStack[f.modalStack.length-1];if(!e)return;return f.getInstance(e.id)}}();t&&t.closeOnPressEscape&&(t.handleClose?t.handleClose():t.handleAction?t.handleAction(\"cancel\"):t.close())}})),t[\"default\"]=f},8166:function(e,t,n){\"use strict\";t.__esModule=!0,t[\"default\"]=function(){if(o[\"default\"].prototype.$isServer)return 0;if(a!==undefined)return a;var e=document.createElement(\"div\");e.className=\"el-scrollbar__wrap\",e.style.visibility=\"hidden\",e.style.width=\"100px\",e.style.position=\"absolute\",e.style.top=\"-9999px\",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow=\"scroll\";var n=document.createElement(\"div\");n.style.width=\"100%\",e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),a=t-r};var r,i=n(1848),o=(r=i)&&r.__esModule?r:{\"default\":r},a=void 0},1636:function(e,t){\"use strict\";t.__esModule=!0,t.isDef=function(e){return e!==undefined&&null!==e},t.isKorean=function(e){return/([(\\uAC00-\\uD7AF)|(\\u3130-\\u318F)])+/gi.test(e)}},7634:function(e,t,n){\"use strict\";var r=n(3330)(n(9767));t.__esModule=!0,t.isDefined=t.isUndefined=t.isFunction=undefined;var i=\"function\"==typeof Symbol&&\"symbol\"===(0,r[\"default\"])(Symbol.iterator)?function(e){return(0,r[\"default\"])(e)}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":(0,r[\"default\"])(e)};t.isString=function(e){return\"[object String]\"===Object.prototype.toString.call(e)},t.isObject=function(e){return\"[object Object]\"===Object.prototype.toString.call(e)},t.isHtmlElement=function(e){return e&&e.nodeType===Node.ELEMENT_NODE};var o,a=n(1848),s=(o=a)&&o.__esModule?o:{\"default\":o},u=function(e){return e&&\"[object Function]\"==={}.toString.call(e)};\"object\"===(\"undefined\"==typeof Int8Array?\"undefined\":i(Int8Array))||!s[\"default\"].prototype.$isServer&&\"function\"==typeof document.childNodes||(t.isFunction=u=function(e){return\"function\"==typeof e||!1}),t.isFunction=u,t.isUndefined=function(e){return void 0===e},t.isDefined=function(e){return e!==undefined&&null!==e}},964:function(e,t,n){\"use strict\";var r=n(3330)(n(9767));t.__esModule=!0,t.isMac=t.isEmpty=t.isEqual=t.arrayEquals=t.looseEqual=t.capitalize=t.kebabCase=t.autoprefixer=t.isFirefox=t.isEdge=t.isIE=t.coerceTruthyValueToArray=t.arrayFind=t.arrayFindIndex=t.escapeRegexpString=t.valueEquals=t.generateId=t.getValueByPath=undefined;var i=\"function\"==typeof Symbol&&\"symbol\"===(0,r[\"default\"])(Symbol.iterator)?function(e){return(0,r[\"default\"])(e)}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":(0,r[\"default\"])(e)};t.noop=function(){},t.hasOwn=function(e,t){return c.call(e,t)},t.toObject=function(e){for(var t={},n=0;nd.reach&&(d.reach=L.reach)}}}}}}function u(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function c(e,t,n){var r=t.next,i={value:n,prev:t,next:r};return t.next=i,r.prev=i,e.length++,i}function l(e,t,n){for(var r=t.next,i=0;i/i,greedy:!0,inside:{\"internal-subset\":{pattern:/(^[^\\[]*\\[)[\\s\\S]+(?=\\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/\"[^\"]*\"|'[^']*'/,greedy:!0},punctuation:/^$|[[\\]]/,\"doctype-tag\":/^DOCTYPE/i,name:/[^\\s'\"]+/}},cdata:{pattern://i,greedy:!0},tag:{pattern:/\\/=$\\/=]+(?:\\s*=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+(?=[\\s>]))|(?=[\\s/>])))+)?\\s*\\/?>/,greedy:!0,inside:{tag:{pattern:/^\\/]+/,inside:{punctuation:/^\\/:]+:/}},\"special-attr\":[],\"attr-value\":{pattern:/=\\s*(?:\"[^\"]*\"|'[^']*'|[^\\s'\">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:\"attr-equals\"},{pattern:/^(\\s*)[\"']|[\"']$/,lookbehind:!0}]}},punctuation:/\\/?>/,\"attr-name\":{pattern:/[^\\s>\\/]+/,inside:{namespace:/^[^\\s>\\/:]+:/}}}},entity:[{pattern:/&[\\da-z]{1,8};/i,alias:\"named-entity\"},/&#x?[\\da-f]{1,8};/i]},r.languages.markup.tag.inside[\"attr-value\"].inside.entity=r.languages.markup.entity,r.languages.markup.doctype.inside[\"internal-subset\"].inside=r.languages.markup,r.hooks.add(\"wrap\",(function(e){\"entity\"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,\"&\"))})),Object.defineProperty(r.languages.markup.tag,\"addInlined\",{value:function(e,t){var n={};n[\"language-\"+t]={pattern:/(^$)/i,lookbehind:!0,inside:r.languages[t]},n.cdata=/^$/i;var i={\"included-cdata\":{pattern://i,inside:n}};i[\"language-\"+t]={pattern:/[\\s\\S]+/,inside:r.languages[t]};var o={};o[e]={pattern:RegExp(/(]*>)(?:))*\\]\\]>|(?!|&&=?|\\|\\|=?|[!=]==|>?=?|[-+*/%&|^!=]=?|\\.{3}|\\?\\?=?|\\?\\.?|[~:]/}),r.languages.javascript[\"class-name\"][0].pattern=/(\\b(?:class|extends|implements|instanceof|interface|new)\\s+)[\\w.\\\\]+/,r.languages.insertBefore(\"javascript\",\"keyword\",{regex:{pattern:RegExp(/((?:^|[^$\\w\\xA0-\\uFFFF.\"'\\])\\s]|\\b(?:return|yield))\\s*)/.source+/\\//.source+\"(?:\"+/(?:\\[(?:[^\\]\\\\\\r\\n]|\\\\.)*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}/.source+\"|\"+/(?:\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.|\\[(?:[^[\\]\\\\\\r\\n]|\\\\.)*\\])*\\])*\\]|\\\\.|[^/\\\\\\[\\r\\n])+\\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+\")\"+/(?=(?:\\s|\\/\\*(?:[^*]|\\*(?!\\/))*\\*\\/)*(?:$|[\\r\\n,.;:})\\]]|\\/\\/))/.source),lookbehind:!0,greedy:!0,inside:{\"regex-source\":{pattern:/^(\\/)[\\s\\S]+(?=\\/[a-z]*$)/,lookbehind:!0,alias:\"language-regex\",inside:r.languages.regex},\"regex-delimiter\":/^\\/|\\/$/,\"regex-flags\":/^[a-z]+$/}},\"function-variable\":{pattern:/#?(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*[=:]\\s*(?:async\\s*)?(?:\\bfunction\\b|(?:\\((?:[^()]|\\([^()]*\\))*\\)|(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)\\s*=>))/,alias:\"function\"},parameter:[{pattern:/(function(?:\\s+(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*)?\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\))/,lookbehind:!0,inside:r.languages.javascript},{pattern:/(^|[^$\\w\\xA0-\\uFFFF])(?!\\s)[_$a-z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*=>)/i,lookbehind:!0,inside:r.languages.javascript},{pattern:/(\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*=>)/,lookbehind:!0,inside:r.languages.javascript},{pattern:/((?:\\b|\\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\\w\\xA0-\\uFFFF]))(?:(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*\\s*)\\(\\s*|\\]\\s*\\(\\s*)(?!\\s)(?:[^()\\s]|\\s+(?![\\s)])|\\([^()]*\\))+(?=\\s*\\)\\s*\\{)/,lookbehind:!0,inside:r.languages.javascript}],constant:/\\b[A-Z](?:[A-Z_]|\\dx?)*\\b/}),r.languages.insertBefore(\"javascript\",\"string\",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:\"comment\"},\"template-string\":{pattern:/`(?:\\\\[\\s\\S]|\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}|(?!\\$\\{)[^\\\\`])*`/,greedy:!0,inside:{\"template-punctuation\":{pattern:/^`|`$/,alias:\"string\"},interpolation:{pattern:/((?:^|[^\\\\])(?:\\\\{2})*)\\$\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})+\\}/,lookbehind:!0,inside:{\"interpolation-punctuation\":{pattern:/^\\$\\{|\\}$/,alias:\"punctuation\"},rest:r.languages.javascript}},string:/[\\s\\S]+/}},\"string-property\":{pattern:/((?:^|[,{])[ \\t]*)([\"'])(?:\\\\(?:\\r\\n|[\\s\\S])|(?!\\2)[^\\\\\\r\\n])*\\2(?=\\s*:)/m,lookbehind:!0,greedy:!0,alias:\"property\"}}),r.languages.insertBefore(\"javascript\",\"operator\",{\"literal-property\":{pattern:/((?:^|[,{])[ \\t]*)(?!\\s)[_$a-zA-Z\\xA0-\\uFFFF](?:(?!\\s)[$\\w\\xA0-\\uFFFF])*(?=\\s*:)/m,lookbehind:!0,alias:\"property\"}}),r.languages.markup&&(r.languages.markup.tag.addInlined(\"script\",\"javascript\"),r.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,\"javascript\")),r.languages.js=r.languages.javascript,function(){if(void 0!==r&&\"undefined\"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e=function(e,t){return\"✖ Error \"+e+\" while fetching file: \"+t},t=\"✖ Error: File does not exist or is empty\",n={js:\"javascript\",py:\"python\",rb:\"ruby\",ps1:\"powershell\",psm1:\"powershell\",sh:\"bash\",bat:\"batch\",h:\"c\",tex:\"latex\"},i=\"data-src-status\",o=\"loading\",a=\"loaded\",s=\"pre[data-src]:not([\"+i+'=\"'+a+'\"]):not(['+i+'=\"'+o+'\"])';r.hooks.add(\"before-highlightall\",(function(e){e.selector+=\", \"+s})),r.hooks.add(\"before-sanity-check\",(function(u){var c=u.element;if(c.matches(s)){u.code=\"\",c.setAttribute(i,o);var l=c.appendChild(document.createElement(\"CODE\"));l.textContent=\"Loading…\";var d=c.getAttribute(\"data-src\"),f=u.language;if(\"none\"===f){var p=(/\\.(\\w+)$/.exec(d)||[,\"none\"])[1];f=n[p]||p}r.util.setLanguage(l,f),r.util.setLanguage(c,f);var h=r.plugins.autoloader;h&&h.loadLanguages(f),function(n,r,i){var o=new XMLHttpRequest;o.open(\"GET\",n,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status=400?i(e(o.status,o.statusText)):i(t))},o.send(null)}(d,(function(e){c.setAttribute(i,a);var t=function(e){var t=/^\\s*(\\d+)\\s*(?:(,)\\s*(?:(\\d+)\\s*)?)?$/.exec(e||\"\");if(t){var n=Number(t[1]),r=t[2],i=t[3];return r?i?[n,Number(i)]:[n,undefined]:[n,n]}return undefined}(c.getAttribute(\"data-range\"));if(t){var n=e.split(/\\r\\n?|\\n/g),o=t[0],s=null==t[1]?n.length:t[1];o0?\"\".concat(this.repliesCount):\"\"}},methods:{onLike:function(){this.$emit(\"like\")},onReply:function(){this.$emit(\"reply\")}}};t.Z=u},7404:function(e,t,n){\"use strict\";var r=n(3330);Object.defineProperty(t,\"X\",{value:!0}),t.Z=void 0;var i=r(n(818)),o=r(n(8711)),a=r(n(2290)),s=r(n(2578)),u=r(n(2408)),c=r(n(8245)),l=n(2304),d=r(n(7848)),f={components:{TkAdminComment:s[\"default\"],TkAdminConfig:u[\"default\"],TkAdminImport:c[\"default\"]},props:{show:Boolean},data:function(){return{iconClose:d[\"default\"],loading:!0,version:\"\",needUpdate:!1,isLogin:!1,isSetPassword:!0,isSetCredentials:!1,credentials:\"\",password:\"\",passwordConfirm:\"\",loginErrorMessage:\"\",activeTabName:\"comment\"}},computed:{canRegist:function(){return!this.isSetPassword&&!!this.password&&this.password===this.passwordConfirm&&(this.isSetCredentials||this.credentials)}},methods:{t:l.t,onLogin:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n,r;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.password){t.next=3;break}return e.loginErrorMessage=(0,l.t)(\"ADMIN_PASSWORD_REQUIRED\"),t.abrupt(\"return\");case 3:return e.loading=!0,e.loginErrorMessage=\"\",n=(0,a[\"default\"])(e.password),t.next=8,(0,l.call)(e.$tcb,\"LOGIN\",{password:n});case 8:if(!(r=t.sent).result.message){t.next=13;break}e.loginErrorMessage=r.result.message,t.next=28;break;case 13:if(!r.result.ticket){t.next=27;break}return t.prev=14,t.next=17,e.$tcb.auth.customAuthProvider().signIn(r.result.ticket);case 17:l.logger.log(\"登录成功\"),e.password=\"\",e.checkAuth(),t.next=25;break;case 22:t.prev=22,t.t0=t[\"catch\"](14),l.logger.error(\"登录失败\",t.t0);case 25:t.next=28;break;case 27:0===r.result.code&&(l.logger.log(\"登录成功\"),localStorage.setItem(\"twikoo-access-token\",n),e.password=\"\",e.checkAuth());case 28:e.loading=!1;case 29:case\"end\":return t.stop()}}),t,null,[[14,22]])})))()},onLogout:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,!e.$tcb){t.next=8;break}return t.next=4,e.$tcb.auth.signOut();case 4:return t.next=6,e.$tcb.auth.anonymousAuthProvider().signIn();case 6:t.next=9;break;case 8:localStorage.removeItem(\"twikoo-access-token\");case 9:e.isLogin=!1,e.loading=!1;case 11:case\"end\":return t.stop()}}),t)})))()},onRegist:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n,r;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,n=(0,a[\"default\"])(e.password),t.next=4,(0,l.call)(e.$tcb,\"SET_PASSWORD\",{password:n,credentials:e.credentials});case 4:(r=t.sent).result.code?(e.loginErrorMessage=(0,l.t)(\"ADMIN_REGIST_FAILED\"),r.result.message&&(e.loginErrorMessage+=\"，\"+r.result.message),l.logger.warn(\"Twikoo 注册失败\",r)):(e.passwordMd5=\"\",e.isSetPassword=!0,e.onLogin()),e.loading=!1;case 7:case\"end\":return t.stop()}}),t)})))()},onShow:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.checkAuth();case 3:if(e.isLogin){t.next=7;break}return t.next=6,e.checkIfPasswordSet();case 6:e.focusPassword();case 7:e.loading=!1;case 8:case\"end\":return t.stop()}}),t)})))()},focusPassword:function(){var e=this;setTimeout((function(){e.$refs.focusme&&e.$refs.focusme.focus()}),500)},checkAuth:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n,r;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$tcb){t.next=7;break}return t.next=3,e.$tcb.auth.getCurrenUser();case 3:n=t.sent,e.isLogin=\"CUSTOM\"===n.loginType,t.next=11;break;case 7:return t.next=9,(0,l.call)(e.$tcb,\"GET_CONFIG\");case 9:(r=t.sent)&&r.result&&r.result.config&&(e.isLogin=r.result.config.IS_ADMIN);case 11:case\"end\":return t.stop()}}),t)})))()},checkIfPasswordSet:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,l.call)(e.$tcb,\"GET_PASSWORD_STATUS\");case 3:n=t.sent,e.version=n.result.version,e.isSetPassword=n.result.status,e.isSetCredentials=!e.$tcb,t.next=14;break;case 9:throw t.prev=9,t.t0=t[\"catch\"](0),e.needUpdate=!0,e.loading=!1,t.t0;case 14:case\"end\":return t.stop()}}),t,null,[[0,9]])})))()},onClose:function(){this.$emit(\"close\")}},watch:{show:function(e){e&&this.onShow()}}};t.Z=f},9454:function(e,t,n){\"use strict\";var r=n(3330);Object.defineProperty(t,\"X\",{value:!0}),t.Z=void 0;var i=r(n(818)),o=r(n(8711)),a=n(7588),s=n(2304),u=n(8521),c=r(n(610)),l=r(n(2948)),d={components:{TkAvatar:c[\"default\"],TkPagination:l[\"default\"]},data:function(){return{loading:!0,comments:[],serverConfig:{},serverVersion:this.$twikoo.serverConfig.VERSION,clientVersion:u.version,count:0,pageSize:5,currentPage:1,filter:{keyword:\"\",type:\"\"}}},methods:{t:s.t,displayCreated:function(e){return(0,s.timeago)(e.created)},convertLink:function(e){return(0,s.convertLink)(e)},getComments:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,(0,s.call)(e.$tcb,\"COMMENT_GET_FOR_ADMIN\",{per:e.pageSize,page:e.currentPage,keyword:e.filter.keyword,type:e.filter.type});case 3:(n=t.sent).result&&!n.result.code&&(e.count=n.result.count,e.comments=n.result.data),e.$nextTick((function(){(0,s.renderLinks)(e.$refs.comments),(0,s.renderMath)(e.$refs[\"comment-list\"],e.$twikoo.katex),e.highlightCode()})),e.loading=!1;case 7:case\"end\":return t.stop()}}),t)})))()},getConfig:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.call)(e.$tcb,\"GET_CONFIG_FOR_ADMIN\");case 2:(n=t.sent).result&&!n.result.code&&(e.serverConfig=n.result.config,e.checkConfig());case 4:case\"end\":return t.stop()}}),t)})))()},checkConfig:function(){var e=this;this.serverConfig.HIGHLIGHT||(this.serverConfig.HIGHLIGHT=\"true\");var t={},n=localStorage.getItem(\"twikoo\");n&&(t=JSON.parse(n)),[\"nick\",\"mail\",\"avatar\"].forEach((function(n){t[n]?e.serverConfig[n]=t[n]:e.serverConfig[n]=\"\"})),!t.nick&&this.serverConfig.BLOGGER_NICK&&(t.nick=this.serverConfig.BLOGGER_NICK),!t.mail&&this.serverConfig.BLOGGER_EMAIL&&(t.mail=this.serverConfig.BLOGGER_EMAIL),!t.link&&this.serverConfig.SITE_URL&&(t.link=this.serverConfig.SITE_URL),localStorage.setItem(\"twikoo\",JSON.stringify(t)),a.app.$emit(\"initMeta\")},onPageSizeChange:function(e){this.pageSize=e,this.getComments()},switchPage:function(e){this.currentPage=e,this.getComments()},handleView:function(e){window.open(\"\".concat(e.url,\"#\").concat(e._id))},handleDelete:function(e){var t=this;return(0,o[\"default\"])(i[\"default\"].mark((function n(){return i[\"default\"].wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(confirm((0,s.t)(\"ADMIN_COMMENT_DELETE_CONFIRM\"))){n.next=2;break}return n.abrupt(\"return\");case 2:return t.loading=!0,n.next=5,(0,s.call)(t.$tcb,\"COMMENT_DELETE_FOR_ADMIN\",{id:e._id});case 5:return n.next=7,t.getComments();case 7:t.loading=!1;case 8:case\"end\":return n.stop()}}),n)})))()},handleSpam:function(e,t){this.setComment(e,{isSpam:t})},handleTop:function(e,t){this.setComment(e,{top:t})},setComment:function(e,t){var n=this;return(0,o[\"default\"])(i[\"default\"].mark((function r(){return i[\"default\"].wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.loading=!0,r.next=3,(0,s.call)(n.$tcb,\"COMMENT_SET_FOR_ADMIN\",{id:e._id,set:t});case 3:return r.next=5,n.getComments();case 5:n.loading=!1;case 6:case\"end\":return r.stop()}}),r)})))()},highlightCode:function(){\"true\"===this.serverConfig.HIGHLIGHT&&(0,s.renderCode)(this.$refs[\"comment-list\"],this.serverConfig.HIGHLIGHT_THEME)}},mounted:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.getConfig(),e.getComments()]);case 2:e.highlightCode();case 3:case\"end\":return t.stop()}}),t)})))()}};t.Z=d},2319:function(e,t,n){\"use strict\";var r=n(3330);Object.defineProperty(t,\"X\",{value:!0}),t.Z=void 0;var i=r(n(818)),o=r(n(8711)),a=n(2304),s=n(8521);function u(e,t){var n=\"undefined\"!=typeof Symbol&&e[Symbol.iterator]||e[\"@@iterator\"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if(\"string\"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return\"Object\"===n&&e.constructor&&(n=e.constructor.name),\"Map\"===n||\"Set\"===n?Array.from(e):\"Arguments\"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&\"number\"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n[\"return\"]||n[\"return\"]()}finally{if(s)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n0&&this.$refs[\"tk-replies\"]&&(this.hasExpand=this.$refs[\"tk-replies\"].scrollHeight>236)},scrollToComment:function(){-1!==window.location.hash.indexOf(this.comment.id)&&(this.$refs[\"tk-comment\"].scrollIntoView(),this.$emit(\"expand\"))},onLike:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.likeLoading){t.next=2;break}return t.abrupt(\"return\");case 2:return e.likeLoading=!0,t.next=5,(0,a.call)(e.$tcb,\"COMMENT_LIKE\",{id:e.comment.id});case 5:e.liked?e.like--:e.like++,e.liked=!e.liked,e.likeLoading=!1;case 8:case\"end\":return t.stop()}}),t)})))()},onReply:function(){this.$emit(\"reply\",this.comment.id)},onReplyReply:function(e){this.pid=e,this.$emit(\"reply\",this.comment.id)},onCancel:function(){this.pid=\"\",this.$emit(\"reply\",\"\")},onLoad:function(){this.pid=\"\",this.$emit(\"reply\",\"\"),this.$emit(\"load\"),this.onExpand()},onExpand:function(){this.isExpanded=!0},onCollapse:function(){this.isExpanded=!1},checkAuth:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$tcb){t.next=7;break}return t.next=3,e.$tcb.auth.getCurrenUser();case 3:n=t.sent,e.isLogin=\"CUSTOM\"===n.loginType,t.next=8;break;case 7:e.isLogin=e.$twikoo.serverConfig&&e.$twikoo.serverConfig.IS_ADMIN;case 8:case\"end\":return t.stop()}}),t)})))()},handleSpam:function(e){this.setComment({isSpam:e})},handleTop:function(e){this.setComment({top:e})},setComment:function(e){var t=this;return(0,o[\"default\"])(i[\"default\"].mark((function n(){return i[\"default\"].wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,(0,a.call)(t.$tcb,\"COMMENT_SET_FOR_ADMIN\",{id:t.comment.id,set:e});case 3:t.loading=!1,t.$emit(\"load\");case 5:case\"end\":return n.stop()}}),n)})))()}},mounted:function(){var e=this;this.$nextTick(this.showExpandIfNeed),this.$nextTick(this.scrollToComment),this.$nextTick((function(){(0,a.renderLinks)(e.$refs.comment),(0,a.renderMath)(e.$refs.comment,e.$twikoo.katex)})),this.checkAuth()},watch:{\"comment.like\":{handler:function(e){this.like=this.comment.like,this.liked=this.comment.liked},immediate:!0},\"config.HIGHLIGHT\":{handler:function(e){var t=this;\"true\"===e&&this.$nextTick((function(){(0,a.renderCode)(t.$refs.comment,t.config.HIGHLIGHT_THEME)}))},immediate:!0}}};t.Z=x},2650:function(e,t,n){\"use strict\";var r=n(3330);Object.defineProperty(t,\"X\",{value:!0}),t.Z=void 0;var i=r(n(818)),o=r(n(8711)),a=n(2304),s=r(n(8526)),u=r(n(5301)),c=r(n(2561)),l=r(n(6342)),d=r(n(1848)),f={components:{TkSubmit:s[\"default\"],TkComment:u[\"default\"]},props:{showAdminEntry:Boolean},data:function(){return{loading:!0,loadingMore:!1,errorMessage:\"\",config:{},comments:[],showExpand:!0,count:0,replyId:\"\",iconSetting:c[\"default\"],iconRefresh:l[\"default\"]}},methods:{t:a.t,initConfig:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.call)(e.$tcb,\"GET_CONFIG\");case 2:(n=t.sent)&&n.result&&n.result.config&&(e.config=n.result.config,d[\"default\"].prototype.$twikoo.serverConfig=n.result.config);case 4:case\"end\":return t.stop()}}),t)})))()},initComments:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,n=(0,a.getUrl)(e.$twikoo.path),t.next=4,e.getComments({url:n});case 4:e.loading=!1;case 5:case\"end\":return t.stop()}}),t)})))()},refresh:function(){this.comments=[],this.initComments()},onExpand:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n,r;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.loadingMore){t.next=2;break}return t.abrupt(\"return\");case 2:return e.loadingMore=!0,n=(0,a.getUrl)(e.$twikoo.path),r=e.comments.filter((function(e){return!e.top})).map((function(e){return e.created})).sort((function(e,t){return e-t}))[0],t.next=7,e.getComments({url:n,before:r});case 7:e.loadingMore=!1;case 8:case\"end\":return t.stop()}}),t)})))()},onCommentLoaded:function(){\"function\"==typeof this.$twikoo.onCommentLoaded&&this.$twikoo.onCommentLoaded()},getComments:function(e){var t=this;return(0,o[\"default\"])(i[\"default\"].mark((function n(){var r;return i[\"default\"].wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,a.call)(t.$tcb,\"COMMENT_GET\",e);case 3:(r=n.sent)&&r.result&&r.result.data&&(t.comments=e.before?t.comments.concat(r.result.data):r.result.data,t.showExpand=r.result.more,t.count=r.result.count||t.comments.length||0,t.$nextTick(t.onCommentLoaded)),n.next=10;break;case 7:n.prev=7,n.t0=n[\"catch\"](0),t.errorMessage=n.t0.message;case 10:case\"end\":return n.stop()}}),n,null,[[0,7]])})))()},onReply:function(e){this.replyId=e},openAdmin:function(){this.$emit(\"admin\")}},mounted:function(){this.initConfig(),this.initComments()}};t.Z=f},4575:function(e,t,n){\"use strict\";var r=n(3330);Object.defineProperty(t,\"X\",{value:!0}),t.Z=void 0;var i=r(n(818)),o=r(n(8711)),a=n(8521),s=n(2304),u={data:function(){return{version:a.version,counter:{}}},methods:{getCounter:function(){var e=this;return(0,o[\"default\"])(i[\"default\"].mark((function t(){var n,r,o;return i[\"default\"].wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=document.getElementById(\"twikoo_visitors\")){t.next=3;break}return t.abrupt(\"return\");case 3:if(-1===[\"localhost\",\"127.0.0.1\",\"0.0.0.0\"].indexOf(window.location.hostname)){t.next=5;break}return t.abrupt(\"return\");case 5:return r=(0,s.getUrl)(e.$twikoo.path),t.next=8,(0,s.call)(e.$tcb,\"COUNTER_GET\",{url:r,href:window.location.href,title:document.title});case 8:o=t.sent,e.counter=o.result,(e.counter.time||0===e.counter.time)&&(n.innerHTML=e.counter.time);case 11:case\"end\":return t.stop()}}),t)})))()}},mounted:function(){this.getCounter()}};t.Z=u},7175:function(e,t,n){\"use strict\";Object.defineProperty(t,\"X\",{value:!0}),t.Z=void 0;var r=n(7588),i=n(2304),o=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,a={props:{nick:String,mail:String,link:String,config:Object},data:function(){return{metaInputs:[{key:\"nick\",locale:(0,i.t)(\"META_INPUT_NICK\"),name:\"nick\",type:\"text\"},{key:\"mail\",locale:(0,i.t)(\"META_INPUT_MAIL\"),name:\"mail\",type:\"email\"},{key:\"link\",locale:(0,i.t)(\"META_INPUT_LINK\"),name:\"link\",type:\"text\"}],metaData:{nick:\"\",mail:\"\",link:\"\"}}},computed:{requiredFields:function(){var e=this.config.REQUIRED_FIELDS;return{nick:!e||-1!==e.indexOf(\"nick\"),mail:!e||-1!==e.indexOf(\"mail\"),link:!!e&&-1!==e.indexOf(\"link\")}}},methods:{t:i.t,initMeta:function(){var e=localStorage.getItem(\"twikoo\");if(e){var t=JSON.parse(e);this.metaData.nick=t.nick,this.metaData.mail=t.mail,this.metaData.link=t.link}this.updateMeta()},updateMeta:function(){localStorage.setItem(\"twikoo\",JSON.stringify(this.metaData)),this.$emit(\"update\",{meta:this.metaData,valid:this.checkValid()})},checkValid:function(){var e=o.test(this.metaData.mail);return(this.metaData.nick||!this.requiredFields.nick)&&(e||!this.requiredFields.mail)&&(this.metaData.link||!this.requiredFields.link)},checkQQ:function(){if((0,i.isQQ)(this.metaData.nick)){var e=this.metaData.nick.replace(/@qq.com/gi,\"\"),t=\"\".concat(e,\"@qq.com\");this.metaData.mail=t,this.getQQNick(e)}},getQQNick:function(e){var t=this,n=\"https://tenapi.cn/qqname?qq=\".concat(e),r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var e=JSON.parse(r.responseText);t.metaData.nick=e.name,t.updateMeta()}},r.open(\"GET\",n),r.send()},checkAdminCrypt:function(){var e=this.$root.$children[0],t=!this.config.HIDE_ADMIN_CRYPT||this.config.HIDE_ADMIN_CRYPT===this.metaData.nick;e.onShowAdminEntry(t)},onMetaChange:function(){this.checkQQ(),this.updateMeta(),this.checkAdminCrypt()}},watch:{nick:function(e){this.metaData.nick=e},mail:function(e){this.metaData.mail=e},link:function(e){this.metaData.link=e},requiredFields:{handler:function(e,t){this.$emit(\"update\",{meta:this.metaData,valid:this.checkValid()})},deep:!0},\"config.VERSION\":function(){this.checkAdminCrypt()}},mounted:function(){r.app.$on(\"initMeta\",this.initMeta),this.initMeta()}};t.Z=a},2201:function(e,t,n){\"use strict\";Object.defineProperty(t,\"X\",{value:!0}),t.Z=void 0;var r=n(2304),i={props:{pageSize:{type:Number,\"default\":10},total:{type:Number,\"default\":0}},data:function(){return{currentPage:1,userInput:0,userPageSize:0,pagers:[]}},computed:{pageCount:function(){return Math.ceil(this.total/this.pageSize)}},methods:{t:r.t,generatePager:function(){for(var e=[],t=1;t1?t.pop():\"\";if(-1!==h.indexOf(n.toLowerCase())){var r=this.getUserId(),i=\"\".concat(Date.now(),\"-\").concat(r),o=t.join(\".\");this.paste(this.getImagePlaceholder(i,n));var a=this.config.IMAGE_CDN;!this.$tcb||a&&\"qcloud\"!==a?a?this.uploadPhotoToThirdParty(i,o,n,e):this.uploadFailed(i,n,(0,f.t)(\"IMAGE_UPLOAD_FAILED_NO_CONF\")):this.uploadPhotoToQcloud(i,o,n,e)}}},getUserId:function(){return this.$tcb?this.$tcb.auth.currentUser.uid:localStorage.getItem(\"twikoo-access-token\")},uploadPhotoToQcloud:function(e,t,n,r){var a=this;return(0,o[\"default\"])(i[\"default\"].mark((function s(){var o,u,c;return i[\"default\"].wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,a.$tcb.app.uploadFile({cloudPath:\"tk-img/\".concat(e,\".\").concat(n),filePath:r});case 3:if(!(o=i.sent).fileID){i.next=10;break}return i.next=7,a.$tcb.app.getTempFileURL({fileList:[o.fileID]});case 7:u=i.sent,c=u.fileList[0].tempFileURL,a.uploadCompleted(e,t,n,c);case 10:i.next=16;break;case 12:i.prev=12,i.t0=i[\"catch\"](0),console.error(i.t0),a.uploadFailed(e,n,i.t0.message);case 16:case\"end\":return i.stop()}}),s,null,[[0,12]])})))()},uploadPhotoToThirdParty:function(e,t,n,r){var a=this;return(0,o[\"default\"])(i[\"default\"].mark((function s(){var o,u,c;return i[\"default\"].wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.t0=f.call,i.t1=a.$tcb,i.t2=\"\".concat(e,\".\").concat(n),i.next=6,(0,f.blobToDataURL)(r);case 6:return i.t3=i.sent,i.t4={fileName:i.t2,photo:i.t3},i.next=10,(0,i.t0)(i.t1,\"UPLOAD_IMAGE\",i.t4);case 10:u=i.sent,(c=u.result).data?a.uploadCompleted(e,t,n,c.data.url):1040===c.code&&c.err&&(o=c.err.match(/this image exists at: (http[^ ]+)/))?(console.warn(c),a.uploadCompleted(e,t,n,o[1])):(console.error(c),a.uploadFailed(e,n,c.err)),i.next=19;break;case 15:i.prev=15,i.t5=i[\"catch\"](0),console.error(i.t5),a.uploadFailed(e,n,i.t5.message);case 19:case\"end\":return i.stop()}}),s,null,[[0,15]])})))()},uploadCompleted:function(e,t,n,r){this.comment=this.comment.replace(this.getImagePlaceholder(e,n),\"![\".concat(t,\"](\").concat(r,\")\")),this.$refs.inputFile.value=\"\"},uploadFailed:function(e,t,n){this.comment=this.comment.replace(this.getImagePlaceholder(e,t),\"_\".concat((0,f.t)(\"IMAGE_UPLOAD_FAILED\"),\": \").concat(n,\"_\")),this.$refs.inputFile.value=\"\"},paste:function(e){if(document.selection)document.selection.createRange().text=e;else if(this.textarea.selectionStart||0===this.textarea.selectionStart){var t=this.textarea.selectionStart,n=this.textarea.selectionEnd;this.comment=this.comment.substring(0,t)+e+this.comment.substring(n,this.comment.length),this.textarea.selectionStart=t+e.length,this.textarea.selectionEnd=t+e.length}else this.comment+=e},getImagePlaceholder:function(e,t){return\"![\".concat((0,f.t)(\"IMAGE_UPLOAD_PLACEHOLDER\"),\" \").concat(e,\".\").concat(t,\"]()\")}},mounted:function(){this.initDraft(),this.initOwo(),this.addEventListener(),this.onBgImgChange()},watch:{\"config.SHOW_EMOTION\":function(){this.initOwo()},\"config.COMMENT_BG_IMG\":function(){this.onBgImgChange()}}};t.Z=g},2469:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"twikoo\",attrs:{id:\"twikoo\"}},[t(\"tk-comments\",{attrs:{\"show-admin-entry\":e.showAdminEntry},on:{admin:function(t){e.showAdmin=!0}}}),e._v(\" \"),t(\"tk-footer\"),e._v(\" \"),t(\"tk-admin\",{attrs:{show:e.showAdmin},on:{close:function(t){e.showAdmin=!1}}})],1)},t.xk=[]},1979:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"tk-action\"},[t(\"a\",{staticClass:\"tk-action-link\",\"class\":{\"tk-liked\":e.liked},on:{click:e.onLike}},[t(\"span\",{staticClass:\"tk-action-icon\",domProps:{innerHTML:e._s(e.iconLike)}}),e._v(\" \"),t(\"span\",{staticClass:\"tk-action-icon tk-action-icon-solid\",domProps:{innerHTML:e._s(e.iconLikeSolid)}}),e._v(\" \"),t(\"span\",{staticClass:\"tk-action-count\"},[e._v(e._s(e.likeCountStr))])]),e._v(\" \"),t(\"a\",{staticClass:\"tk-action-link\",on:{click:e.onReply}},[t(\"span\",{staticClass:\"tk-action-icon\",domProps:{innerHTML:e._s(e.iconComment)}}),e._v(\" \"),t(\"span\",{staticClass:\"tk-action-icon tk-action-icon-solid\",domProps:{innerHTML:e._s(e.iconCommentSolid)}}),e._v(\" \"),t(\"span\",{staticClass:\"tk-action-count\"},[e._v(e._s(e.repliesCountStr))])])])},t.xk=[]},7052:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"tk-admin-container\"},[t(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"tk-admin\",\"class\":{__show:e.show}},[t(\"a\",{staticClass:\"tk-admin-close\",domProps:{innerHTML:e._s(e.iconClose)},on:{click:e.onClose}}),e._v(\" \"),e.needUpdate?t(\"div\",{staticClass:\"tk-login-title\"},[t(\"div\",[e._v(e._s(e.t(\"ADMIN_NEED_UPDATE\")))]),e._v(\" \"),t(\"a\",{attrs:{href:\"https://twikoo.js.org/quick-start.html\",target:\"_blank\"}},[e._v(\"https://twikoo.js.org/quick-start.html\")])]):e._e(),e._v(\" \"),e.needUpdate?e._e():t(\"div\",[!e.isLogin&&e.isSetPassword?t(\"div\",{staticClass:\"tk-login\"},[t(\"div\",{staticClass:\"tk-login-title\"},[e._v(e._s(e.t(\"ADMIN_LOGIN_TITLE\")))]),e._v(\" \"),t(\"input\",{attrs:{type:\"hidden\"}}),e._v(\" \"),t(\"el-input\",{ref:\"focusme\",staticClass:\"tk-password\",attrs:{placeholder:e.t(\"ADMIN_PASSWORD_PLACEHOLDER\"),\"show-password\":\"\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.onLogin.apply(null,arguments)}},model:{value:e.password,callback:function(t){e.password=t},expression:\"password\"}},[t(\"template\",{slot:\"prepend\"},[e._v(e._s(e.t(\"ADMIN_PASSWORD\")))]),e._v(\" \"),t(\"el-button\",{attrs:{slot:\"append\"},on:{click:e.onLogin},slot:\"append\"},[e._v(e._s(e.t(\"ADMIN_LOGIN\")))])],2),e._v(\" \"),e.loginErrorMessage?t(\"div\",{staticClass:\"tk-login-msg\"},[e._v(\"\\n \"+e._s(e.loginErrorMessage)+\"\\n \"),t(\"a\",{attrs:{href:\"https://twikoo.js.org/faq.html\",rel:\"noopener noreferrer\",target:\"_blank\"}},[e._v(e._s(e.t(\"ADMIN_FORGOT\")))])]):e._e()],1):e._e(),e._v(\" \"),e.isLogin||e.isSetPassword?e._e():t(\"div\",{staticClass:\"tk-regist\"},[t(\"div\",{staticClass:\"tk-login-title\"},[e._v(e._s(e.t(\"ADMIN_LOGIN_TITLE\")))]),e._v(\" \"),e.isSetCredentials?e._e():t(\"el-input\",{ref:\"focusme\",staticClass:\"tk-password\",attrs:{placeholder:e.t(\"ADMIN_CREDENTIALS_PLACEHOLDER\")},model:{value:e.credentials,callback:function(t){e.credentials=t},expression:\"credentials\"}},[t(\"template\",{slot:\"prepend\"},[e._v(e._s(e.t(\"ADMIN_CREDENTIALS\")))])],2),e._v(\" \"),t(\"el-input\",{staticClass:\"tk-password\",attrs:{placeholder:e.t(\"ADMIN_SET_PASSWORD_PLACEHOLDER\"),\"show-password\":\"\"},model:{value:e.password,callback:function(t){e.password=t},expression:\"password\"}},[t(\"template\",{slot:\"prepend\"},[e._v(e._s(e.t(\"ADMIN_SET_PASSWORD\")))])],2),e._v(\" \"),t(\"el-input\",{staticClass:\"tk-password\",attrs:{placeholder:e.t(\"ADMIN_SET_PASSWORD_CONFIRM_PLACEHOLDER\"),\"show-password\":\"\"},model:{value:e.passwordConfirm,callback:function(t){e.passwordConfirm=t},expression:\"passwordConfirm\"}},[t(\"template\",{slot:\"prepend\"},[e._v(e._s(e.t(\"ADMIN_SET_PASSWORD_CONFIRM\")))])],2),e._v(\" \"),t(\"el-button\",{staticClass:\"tk-regist-button\",attrs:{disabled:!e.canRegist},on:{click:e.onRegist}},[e._v(e._s(e.t(\"ADMIN_REGIST\")))]),e._v(\" \"),e.loginErrorMessage?t(\"div\",{staticClass:\"tk-login-msg\"},[e._v(e._s(e.loginErrorMessage))]):e._e(),e._v(\" \"),e.isSetCredentials?e._e():t(\"div\",{staticClass:\"tk-login-msg\"},[t(\"a\",{attrs:{href:\"https://twikoo.js.org/faq.html\",rel:\"noopener noreferrer\",target:\"_blank\"}},[e._v(e._s(e.t(\"ADMIN_CREDENTIALS_FAQ\")))])])],1),e._v(\" \"),e.isLogin?t(\"div\",{staticClass:\"tk-panel\"},[t(\"div\",{staticClass:\"tk-panel-title\"},[t(\"div\",[e._v(e._s(e.t(\"ADMIN_TITLE\")))]),e._v(\" \"),t(\"a\",{staticClass:\"tk-panel-logout\",on:{click:e.onLogout}},[e._v(e._s(e.t(\"ADMIN_LOGOUT\")))])]),e._v(\" \"),t(\"div\",{staticClass:\"tk-tabs\"},[t(\"div\",{staticClass:\"tk-tab\",\"class\":{__active:\"comment\"===e.activeTabName},on:{click:function(t){e.activeTabName=\"comment\"}}},[e._v(e._s(e.t(\"ADMIN_COMMENT\")))]),e._v(\" \"),t(\"div\",{staticClass:\"tk-tab\",\"class\":{__active:\"config\"===e.activeTabName},on:{click:function(t){e.activeTabName=\"config\"}}},[e._v(e._s(e.t(\"ADMIN_CONFIG\")))]),e._v(\" \"),t(\"div\",{staticClass:\"tk-tab\",\"class\":{__active:\"import\"===e.activeTabName},on:{click:function(t){e.activeTabName=\"import\"}}},[e._v(e._s(e.t(\"ADMIN_IMPORT\")))])]),e._v(\" \"),t(\"tk-admin-comment\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"comment\"===e.activeTabName,expression:\"activeTabName === 'comment'\"}]}),e._v(\" \"),t(\"tk-admin-config\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"config\"===e.activeTabName,expression:\"activeTabName === 'config'\"}]}),e._v(\" \"),t(\"tk-admin-import\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"import\"===e.activeTabName,expression:\"activeTabName === 'import'\"}]})],1):e._e()])])])},t.xk=[]},3032:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"tk-admin-comment\"},[e.clientVersion!==e.serverVersion?t(\"div\",{staticClass:\"tk-admin-warn\"},[t(\"span\",[e._v(e._s(e.t(\"ADMIN_CLIENT_VERSION\"))+e._s(e.clientVersion)+\"，\")]),e._v(\" \"),t(\"span\",[e._v(e._s(e.t(\"ADMIN_SERVER_VERSION\"))+e._s(e.serverVersion)+\"，\")]),e._v(\" \"),e._m(0)]):e._e(),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-comment-filter\"},[t(\"el-input\",{staticClass:\"tk-admin-comment-filter-keyword\",attrs:{size:\"small\",placeholder:e.t(\"ADMIN_COMMENT_SEARCH_PLACEHOLDER\")},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.getComments.apply(null,arguments)}},model:{value:e.filter.keyword,callback:function(t){e.$set(e.filter,\"keyword\",t)},expression:\"filter.keyword\"}}),e._v(\" \"),t(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.filter.type,expression:\"filter.type\"}],staticClass:\"tk-admin-comment-filter-type\",on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return\"_value\"in e?e._value:e.value}));e.$set(e.filter,\"type\",t.target.multiple?n:n[0])}}},[t(\"option\",{attrs:{value:\"\"}},[e._v(e._s(e.t(\"ADMIN_COMMENT_FILTER_ALL\")))]),e._v(\" \"),t(\"option\",{attrs:{value:\"VISIBLE\"}},[e._v(e._s(e.t(\"ADMIN_COMMENT_FILTER_VISIBLE\")))]),e._v(\" \"),t(\"option\",{attrs:{value:\"HIDDEN\"}},[e._v(e._s(e.t(\"ADMIN_COMMENT_FILTER_HIDDEN\")))])]),e._v(\" \"),t(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:e.getComments}},[e._v(e._s(e.t(\"ADMIN_COMMENT_SEARCH\")))])],1),e._v(\" \"),t(\"div\",{ref:\"comment-list\",staticClass:\"tk-admin-comment-list\"},e._l(e.comments,(function(n){return t(\"div\",{key:n._id,staticClass:\"tk-admin-comment-item\"},[t(\"div\",{staticClass:\"tk-admin-comment-meta\"},[t(\"tk-avatar\",{attrs:{config:e.serverConfig,avatar:n.avatar,mail:n.mail,link:n.link}}),e._v(\" \"),n.link?e._e():t(\"span\",[e._v(e._s(n.nick)+\" \")]),e._v(\" \"),n.link?t(\"a\",{attrs:{href:e.convertLink(n.link),target:\"_blank\"}},[e._v(e._s(n.nick)+\" \")]):e._e(),e._v(\" \"),n.mail?t(\"span\",[e._v(\"(\"),t(\"a\",{attrs:{href:\"mailto:\".concat(n.mail)}},[e._v(e._s(n.mail))]),e._v(\") \")]):e._e(),e._v(\" \"),n.isSpam?t(\"span\",[e._v(e._s(e.t(\"ADMIN_COMMENT_IS_SPAM_SUFFIX\"))+\" \")]):e._e(),e._v(\" \"),t(\"span\",{staticClass:\"tk-time\"},[e._v(e._s(e.displayCreated(n))+\" \")]),e._v(\" \"),t(\"span\",[e._v(e._s(n.ipRegion))])],1),e._v(\" \"),t(\"div\",{ref:\"comments\",refInFor:!0,staticClass:\"tk-content\",domProps:{innerHTML:e._s(n.comment)}}),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-actions\"},[t(\"el-button\",{attrs:{size:\"mini\",type:\"text\"},on:{click:function(t){return e.handleView(n)}}},[e._v(e._s(e.t(\"ADMIN_COMMENT_VIEW\")))]),e._v(\" \"),n.isSpam?t(\"el-button\",{attrs:{size:\"mini\",type:\"text\"},on:{click:function(t){return e.handleSpam(n,!1)}}},[e._v(e._s(e.t(\"ADMIN_COMMENT_SHOW\")))]):e._e(),e._v(\" \"),n.isSpam?e._e():t(\"el-button\",{attrs:{size:\"mini\",type:\"text\"},on:{click:function(t){return e.handleSpam(n,!0)}}},[e._v(e._s(e.t(\"ADMIN_COMMENT_HIDE\")))]),e._v(\" \"),!n.rid&&n.top?t(\"el-button\",{attrs:{size:\"mini\",type:\"text\"},on:{click:function(t){return e.handleTop(n,!1)}}},[e._v(e._s(e.t(\"ADMIN_COMMENT_UNTOP\")))]):e._e(),e._v(\" \"),n.rid||n.top?e._e():t(\"el-button\",{attrs:{size:\"mini\",type:\"text\"},on:{click:function(t){return e.handleTop(n,!0)}}},[e._v(e._s(e.t(\"ADMIN_COMMENT_TOP\")))]),e._v(\" \"),t(\"el-button\",{attrs:{size:\"mini\",type:\"text\"},on:{click:function(t){return e.handleDelete(n)}}},[e._v(e._s(e.t(\"ADMIN_COMMENT_DELETE\")))])],1)])})),0),e._v(\" \"),t(\"tk-pagination\",{attrs:{\"page-size\":e.pageSize,total:e.count},on:{\"page-size-change\":e.onPageSizeChange,\"current-change\":e.switchPage}})],1)},t.xk=[function(){var e=this,t=e._self._c;return t(\"span\",[e._v(\"请参考 \"),t(\"a\",{attrs:{href:\"https://twikoo.js.org/quick-start.html#%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0\",target:\"_blank\"}},[e._v(\"版本更新\")]),e._v(\" 进行升级\")])}]},4027:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"tk-admin-config\"},[e.clientVersion!==e.serverVersion?t(\"div\",{staticClass:\"tk-admin-warn\"},[t(\"span\",[e._v(e._s(e.t(\"ADMIN_CLIENT_VERSION\"))+e._s(e.clientVersion)+\"，\")]),e._v(\" \"),t(\"span\",[e._v(e._s(e.t(\"ADMIN_SERVER_VERSION\"))+e._s(e.serverVersion)+\"，\")]),e._v(\" \"),e._m(0)]):e._e(),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-config-groups\"},[e._l(e.settings,(function(n){return t(\"details\",{key:n.name,staticClass:\"tk-admin-config-group\"},[t(\"summary\",{staticClass:\"tk-admin-config-group-title\"},[e._v(e._s(n.name))]),e._v(\" \"),e._l(n.items,(function(n){return t(\"div\",{key:n.key,staticClass:\"tk-admin-config-item\"},[t(\"div\",{staticClass:\"tk-admin-config-title\",attrs:{title:n.key}},[e._v(e._s(n.key))]),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-config-input\"},[t(\"el-input\",{attrs:{placeholder:n.ph,size:\"small\",\"show-password\":n.secret},model:{value:n.value,callback:function(t){e.$set(n,\"value\",t)},expression:\"setting.value\"}})],1),e._v(\" \"),t(\"div\"),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-config-desc\"},[e._v(e._s(n.desc))])])}))],2)})),e._v(\" \"),t(\"details\",{staticClass:\"tk-admin-config-group\"},[t(\"summary\",{staticClass:\"tk-admin-config-group-title\"},[e._v(e._s(e.t(\"ADMIN_CONFIG_EMAIL_TEST\")))]),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-config-email-test\"},[t(\"div\",{staticClass:\"tk-admin-config-email-test-desc\"},[e._v(e._s(e.t(\"ADMIN_CONFIG_EMAIL_TEST_HELP\")))]),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-config-input\"},[t(\"el-input\",{attrs:{size:\"small\"},model:{value:e.emailTestAddress,callback:function(t){e.emailTestAddress=t},expression:\"emailTestAddress\"}},[t(\"el-button\",{attrs:{slot:\"append\",type:\"info\"},on:{click:e.testEmail},slot:\"append\"},[e._v(e._s(e.t(\"ADMIN_CONFIG_EMAIL_TEST_BTN\")))])],1)],1),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-config-email-test-desc\"},[e._v(e._s(e.t(\"ADMIN_CONFIG_EMAIL_TEST_RESULT\"))+e._s(e.emailTestResult))])])])],2),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-config-actions\"},[t(\"el-button\",{attrs:{size:\"small\",type:\"primary\"},on:{click:e.saveConfig}},[e._v(e._s(e.t(\"ADMIN_CONFIG_SAVE\")))]),e._v(\" \"),t(\"el-button\",{attrs:{size:\"small\",type:\"info\"},on:{click:e.resetConfig}},[e._v(e._s(e.t(\"ADMIN_CONFIG_RESET\")))])],1),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-config-message\"},[e._v(e._s(e.message))])])},t.xk=[function(){var e=this,t=e._self._c;return t(\"span\",[e._v(\"请参考 \"),t(\"a\",{attrs:{href:\"https://twikoo.js.org/quick-start.html#%E7%89%88%E6%9C%AC%E6%9B%B4%E6%96%B0\",target:\"_blank\"}},[e._v(\"版本更新\")]),e._v(\" 进行升级\")])}]},8247:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"tk-admin-import\"},[t(\"div\",{staticClass:\"tk-admin-warn tk-admin-import-warn\"},[t(\"p\",[e._v(e._s(e.t(\"ADMIN_IMPORT_WARN\")))]),e._v(\" \"),t(\"p\",[e._v(e._s(e.warnText[e.source]))])]),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-import-label\"},[e._v(e._s(e.t(\"ADMIN_IMPORT_SELECT_SOURCE\")))]),e._v(\" \"),t(\"select\",{directives:[{name:\"model\",rawName:\"v-model\",value:e.source,expression:\"source\"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return\"_value\"in e?e._value:e.value}));e.source=t.target.multiple?n:n[0]}}},[t(\"option\",{attrs:{disabled:\"\",value:\"\"}},[e._v(e._s(e.t(\"ADMIN_IMPORT_SELECT\")))]),e._v(\" \"),t(\"option\",{attrs:{value:\"valine\"}},[e._v(\"Valine (JSON)\")]),e._v(\" \"),t(\"option\",{attrs:{value:\"disqus\"}},[e._v(\"Disqus (XML)\")]),e._v(\" \"),t(\"option\",{attrs:{value:\"artalk\"}},[e._v(\"Artalk (JSON)\")]),e._v(\" \"),t(\"option\",{attrs:{value:\"twikoo\"}},[e._v(\"Twikoo (JSON)\")])]),e._v(\" \"),t(\"div\",{staticClass:\"tk-admin-import-label\"},[e._v(e._s(e.t(\"ADMIN_IMPORT_SELECT_FILE\")))]),e._v(\" \"),t(\"input\",{ref:\"inputFile\",attrs:{type:\"file\",value:\"\"}}),e._v(\" \"),t(\"el-button\",{attrs:{size:\"small\",disabled:e.loading},on:{click:e.uploadFile}},[e._v(e._s(e.t(\"ADMIN_IMPORT_START\")))]),e._v(\" \"),t(\"el-input\",{ref:\"logTextArea\",attrs:{type:\"textarea\",rows:10,placeholder:e.t(\"ADMIN_IMPORT_LOG\"),readonly:\"\"},model:{value:e.logText,callback:function(t){e.logText=t},expression:\"logText\"}})],1)},t.xk=[]},7417:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"tk-avatar\",\"class\":{\"tk-clickable\":!!e.link,\"tk-has-avatar\":!!e.avatarInner},on:{click:e.onClick}},[e.avatarInner?e._e():t(\"div\",{staticClass:\"tk-avatar-img\",domProps:{innerHTML:e._s(e.iconUser)}}),e._v(\" \"),e.avatarInner?t(\"img\",{staticClass:\"tk-avatar-img\",attrs:{src:e.avatarInner,alt:\"\"}}):e._e()])},t.xk=[]},4428:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{ref:\"tk-comment\",staticClass:\"tk-comment\",\"class\":{\"tk-master\":e.comment.master},attrs:{id:e.comment.id}},[t(\"tk-avatar\",{attrs:{config:e.config,nick:e.comment.nick,avatar:e.comment.avatar,\"mail-md5\":e.comment.mailMd5,link:e.convertedLink}}),e._v(\" \"),t(\"div\",{staticClass:\"tk-main\"},[t(\"div\",{staticClass:\"tk-row\"},[t(\"div\",{staticClass:\"tk-meta\"},[e.convertedLink?e._e():t(\"strong\",{staticClass:\"tk-nick\"},[e._v(e._s(e.comment.nick))]),e._v(\" \"),e.convertedLink?t(\"a\",{staticClass:\"tk-nick tk-nick-link\",attrs:{href:e.convertedLink,target:\"_blank\",rel:\"noopener noreferrer\"}},[t(\"strong\",[e._v(e._s(e.comment.nick))])]):e._e(),e._v(\" \"),e.comment.master?t(\"span\",{staticClass:\"tk-tag tk-tag-green\"},[e._v(e._s(e.config.MASTER_TAG||e.t(\"COMMENT_MASTER_TAG\")))]):e._e(),e._v(\" \"),e.comment.top?t(\"span\",{staticClass:\"tk-tag tk-tag-red\"},[e._v(e._s(e.t(\"COMMENT_TOP_TAG\")))]):e._e(),e._v(\" \"),e.comment.isSpam?t(\"span\",{staticClass:\"tk-tag tk-tag-yellow\"},[e._v(e._s(e.t(\"COMMENT_REVIEWING_TAG\")))]):e._e(),e._v(\" \"),t(\"small\",{staticClass:\"tk-time\"},[t(\"time\",{attrs:{datetime:e.jsonTimestamp,title:e.localeTime}},[e._v(e._s(e.displayCreated))])]),e._v(\" \"),e.isLogin?t(\"small\",{staticClass:\"tk-actions\"},[e.comment.isSpam?t(\"a\",{on:{click:function(t){return e.handleSpam(!1)}}},[e._v(e._s(e.t(\"ADMIN_COMMENT_SHOW\")))]):e._e(),e._v(\" \"),e.comment.isSpam?e._e():t(\"a\",{on:{click:function(t){return e.handleSpam(!0)}}},[e._v(e._s(e.t(\"ADMIN_COMMENT_HIDE\")))]),e._v(\" \"),!e.comment.rid&&e.comment.top?t(\"a\",{on:{click:function(t){return e.handleTop(!1)}}},[e._v(e._s(e.t(\"ADMIN_COMMENT_UNTOP\")))]):e._e(),e._v(\" \"),e.comment.rid||e.comment.top?e._e():t(\"a\",{on:{click:function(t){return e.handleTop(!0)}}},[e._v(e._s(e.t(\"ADMIN_COMMENT_TOP\")))])]):e._e()]),e._v(\" \"),t(\"tk-action\",{attrs:{liked:e.liked,\"like-count\":e.like,\"replies-count\":e.comment.replies.length},on:{like:e.onLike,reply:e.onReply}})],1),e._v(\" \"),t(\"div\",{staticClass:\"tk-content\"},[e.comment.pid?t(\"span\",[e._v(e._s(e.t(\"COMMENT_REPLIED\"))+\" \"),t(\"a\",{staticClass:\"tk-ruser\",attrs:{href:\"#\".concat(e.comment.pid)}},[e._v(\"@\"+e._s(e.comment.ruser))]),e._v(\" :\")]):e._e(),e._v(\" \"),t(\"span\",{ref:\"comment\",domProps:{innerHTML:e._s(e.comment.comment)}})]),e._v(\" \"),e.comment.ipRegion||e.comment.os||e.comment.browser?t(\"div\",{staticClass:\"tk-extras\"},[e.comment.ipRegion?t(\"div\",{staticClass:\"tk-extra\"},[t(\"span\",{staticClass:\"tk-icon __comment\",domProps:{innerHTML:e._s(e.iconLocation)}}),e._v(\" \"),t(\"span\",{staticClass:\"tk-extra-text\"},[e._v(\" \"+e._s(e.comment.ipRegion))])]):e._e(),e._v(\" \"),e.comment.os?t(\"div\",{staticClass:\"tk-extra\"},[t(\"span\",{staticClass:\"tk-icon __comment\",domProps:{innerHTML:e._s(e.iconOs)}}),e._v(\" \"),t(\"span\",{staticClass:\"tk-extra-text\"},[e._v(\" \"+e._s(e.comment.os))])]):e._e(),e._v(\" \"),e.comment.browser?t(\"div\",{staticClass:\"tk-extra\"},[t(\"span\",{staticClass:\"tk-icon __comment\",domProps:{innerHTML:e._s(e.iconBrowser)}}),e._v(\" \"),t(\"span\",{staticClass:\"tk-extra-text\"},[e._v(\" \"+e._s(e.comment.browser))])]):e._e()]):e._e(),e._v(\" \"),t(\"div\",{ref:\"tk-replies\",staticClass:\"tk-replies\",\"class\":{\"tk-replies-expand\":e.isExpanded||!e.showExpand}},e._l(e.comment.replies,(function(n){return t(\"tk-comment\",{key:n.id,attrs:{comment:n,config:e.config},on:{expand:e.onExpand,load:e.onLoad,reply:e.onReplyReply}})})),1),e._v(\" \"),e.replying?t(\"tk-submit\",{attrs:{\"reply-id\":e.comment.id,pid:e.pid,config:e.config},on:{load:e.onLoad,cancel:e.onCancel}}):e._e(),e._v(\" \"),e.showExpand?t(\"div\",{staticClass:\"tk-expand\",on:{click:e.onExpand}},[e._v(e._s(e.t(\"COMMENT_EXPAND\")))]):e._e(),e._v(\" \"),e.showCollapse?t(\"div\",{staticClass:\"tk-expand _collapse\",on:{click:e.onCollapse}},[e._v(e._s(e.t(\"COMMENT_COLLAPSE\")))]):e._e()],1)],1)},t.xk=[]},4489:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"tk-comments\"},[t(\"tk-submit\",{attrs:{config:e.config},on:{load:e.initComments}}),e._v(\" \"),t(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticClass:\"tk-comments-container\"},[t(\"div\",{staticClass:\"tk-comments-title\"},[t(\"span\",{staticClass:\"tk-comments-count\",\"class\":{__hidden:!e.comments.length}},[t(\"span\",[e._v(e._s(e.count))]),e._v(\" \"),t(\"span\",[e._v(e._s(e.t(\"COMMENTS_COUNT_SUFFIX\")))])]),e._v(\" \"),t(\"span\",[e.loading||e.loadingMore?e._e():t(\"span\",{staticClass:\"tk-icon __comments\",domProps:{innerHTML:e._s(e.iconRefresh)},on:{click:e.refresh}}),e.showAdminEntry?t(\"span\",{staticClass:\"tk-icon __comments\",domProps:{innerHTML:e._s(e.iconSetting)},on:{click:e.openAdmin}}):e._e()])]),e._v(\" \"),e.loading||e.comments.length?e._e():t(\"div\",{staticClass:\"tk-comments-no\"},[e.errorMessage?e._e():t(\"span\",[e._v(e._s(e.t(\"COMMENTS_NO_COMMENTS\")))]),e._v(\" \"),e.errorMessage?t(\"span\",{staticClass:\"tk-comments-error\"},[e._v(e._s(e.errorMessage))]):e._e()]),e._v(\" \"),e._l(e.comments,(function(n){return t(\"tk-comment\",{key:n.id,attrs:{comment:n,replying:e.replyId===n.id,config:e.config},on:{reply:e.onReply,load:e.initComments}})})),e._v(\" \"),e.showExpand&&!e.loading?t(\"div\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loadingMore,expression:\"loadingMore\"}],staticClass:\"tk-expand\",on:{click:e.onExpand}},[e._v(e._s(e.t(\"COMMENTS_EXPAND\")))]):e._e()],2)],1)},t.xk=[]},5187:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"tk-footer\"},[e._v(\"\\n Powered by \"),t(\"a\",{attrs:{href:\"https://twikoo.js.org\",target:\"_blank\"}},[e._v(\"Twikoo\")]),e._v(\"\\n v\"+e._s(e.version)+\"\\n\")])},t.xk=[]},9210:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"tk-meta-input\"},e._l(e.metaInputs,(function(n){return t(\"el-input\",{key:n.key,attrs:{name:n.name,type:n.type,placeholder:e.requiredFields[n.key]?e.t(\"META_INPUT_REQUIRED\"):e.t(\"META_INPUT_NOT_REQUIRED\"),size:\"small\"},on:{change:e.onMetaChange},model:{value:e.metaData[n.key],callback:function(t){e.$set(e.metaData,n.key,t)},expression:\"metaData[metaInput.key]\"}},[t(\"template\",{slot:\"prepend\"},[e._v(e._s(n.locale))])],2)})),1)},t.xk=[]},1105:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"tk-pagination\"},[e.pageCount?t(\"div\",{staticClass:\"tk-pagination-options\"},[t(\"div\",[t(\"span\",[e._v(e._s(e.t(\"PAGINATION_COUNT_PREFIX\")))]),e._v(\" \"),t(\"span\",[e._v(e._s(e.total))]),e._v(\" \"),t(\"span\",[e._v(e._s(e.t(\"PAGINATION_COUNT_SUFFIX\")))])]),e._v(\" \"),t(\"el-input\",{attrs:{type:\"number\",min:\"1\",max:\"100\",value:e.userPageSize?e.userPageSize:e.pageSize},on:{input:e.handleInputPageSize,change:e.pageSizeChamge}}),e._v(\" \"),t(\"span\",[e._v(e._s(e.t(\"PAGINATION_PAGESIZE\")))])],1):e._e(),e._v(\" \"),t(\"div\",{staticClass:\"tk-pagination-pagers\"},e._l(e.pagers,(function(n){return t(\"div\",{key:n.page,staticClass:\"tk-pagination-pager\",\"class\":{__current:n.page===e.currentPage},on:{click:function(t){return e.currentChange(n.page)}}},[e._v(e._s(n.title))])})),0),e._v(\" \"),e.pageCount?t(\"div\",{staticClass:\"tk-pagination-options\"},[t(\"span\",[e._v(e._s(e.t(\"PAGINATION_GOTO_PREFIX\")))]),e._v(\" \"),t(\"el-input\",{attrs:{type:\"number\",min:\"1\",max:e.pageCount,value:e.userInput?e.userInput:e.currentPage},on:{input:e.handleInput,change:e.currentChange}}),e._v(\" \"),t(\"span\",[e._v(e._s(e.t(\"PAGINATION_GOTO_SUFFIX\")))])],1):e._e()])},t.xk=[]},8407:function(e,t){\"use strict\";t.xk=t.sY=void 0,t.sY=function(){var e=this,t=e._self._c;return t(\"div\",{staticClass:\"tk-submit\"},[t(\"div\",{staticClass:\"tk-row\"},[t(\"tk-avatar\",{attrs:{config:e.config,mail:e.mail}}),e._v(\" \"),t(\"div\",{staticClass:\"tk-col\"},[t(\"tk-meta-input\",{attrs:{nick:e.nick,mail:e.mail,link:e.link,config:e.config},on:{update:e.onMetaUpdate}}),e._v(\" \"),t(\"el-input\",{ref:\"textarea\",staticClass:\"tk-input\",attrs:{type:\"textarea\",\"show-word-limit\":\"\",placeholder:e.commentPlaceholder,autosize:{minRows:3},maxlength:e.maxLength},on:{input:e.onCommentInput},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.onEnterKeyUp(t)}},model:{value:e.comment,callback:function(t){e.comment=t},expression:\"comment\"}})],1)],1),e._v(\" \"),t(\"div\",{staticClass:\"tk-row actions\"},[t(\"div\",{staticClass:\"tk-row-actions-start\"},[t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"true\"===e.config.SHOW_EMOTION,expression:\"config.SHOW_EMOTION === 'true'\"},{name:\"clickoutside\",rawName:\"v-clickoutside\",value:e.closeOwo,expression:\"closeOwo\"}],ref:\"owo\",staticClass:\"tk-submit-action-icon OwO\",domProps:{innerHTML:e._s(e.iconEmotion)}}),e._v(\" \"),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"true\"===e.config.SHOW_IMAGE,expression:\"config.SHOW_IMAGE === 'true'\"}],staticClass:\"tk-submit-action-icon\",domProps:{innerHTML:e._s(e.iconImage)},on:{click:e.openSelectImage}}),e._v(\" \"),t(\"input\",{ref:\"inputFile\",staticClass:\"tk-input-image\",attrs:{type:\"file\",accept:\"image/*\",value:\"\"},on:{change:e.onSelectImage}}),e._v(\" \"),t(\"div\",{staticClass:\"tk-error-message\"},[e._v(e._s(e.errorMessage))])]),e._v(\" \"),t(\"a\",{staticClass:\"tk-submit-action-icon __markdown\",attrs:{alt:\"Markdown is supported\",href:\"https://guides.github.com/features/mastering-markdown/\",target:\"_blank\",rel:\"noopener noreferrer\"},domProps:{innerHTML:e._s(e.iconMarkdown)}}),e._v(\" \"),e.replyId?t(\"el-button\",{staticClass:\"tk-cancel\",attrs:{size:\"small\"},on:{click:e.cancel}},[e._v(e._s(e.t(\"SUBMIT_CANCEL\")))]):e._e(),e._v(\" \"),t(\"el-button\",{staticClass:\"tk-preview\",attrs:{size:\"small\"},on:{click:e.preview}},[e._v(e._s(e.t(\"SUBMIT_PREVIEW\")))]),e._v(\" \"),t(\"el-button\",{staticClass:\"tk-send\",attrs:{type:\"primary\",size:\"small\",disabled:!e.canSend},on:{click:e.send}},[e._v(e._s(e.isSending?e.t(\"SUBMIT_SENDING\"):e.t(\"SUBMIT_SEND\")))])],1),e._v(\" \"),e.isPreviewing?t(\"div\",{ref:\"comment-preview\",staticClass:\"tk-preview-container\",domProps:{innerHTML:e._s(e.commentHtml)}}):e._e()])},t.xk=[]},8666:function(e,t){\"use strict\";t.Z=function(e,t){for(var n=[],r={},i=0;i=0&&Math.floor(t)===t&&isFinite(e)}function _(e){return l(e)&&\"function\"==typeof e.then&&\"function\"==typeof e[\"catch\"]}function y(e){return null==e?\"\":Array.isArray(e)||m(e)&&e.toString===g?JSON.stringify(e,null,2):String(e)}function b(e){var t=parseFloat(e);return isNaN(t)?e:t}function k(e,t){for(var n=Object.create(null),r=e.split(\",\"),i=0;i-1)return e.splice(r,1)}}var x=Object.prototype.hasOwnProperty;function A(e,t){return x.call(e,t)}function C(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var D=/-(\\w)/g,I=C((function(e){return e.replace(D,(function(e,t){return t?t.toUpperCase():\"\"}))})),O=C((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),S=/\\B([A-Z])/g,T=C((function(e){return e.replace(S,\"-$1\").toLowerCase()})),M=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n};function N(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function F(e,t){for(var n in t)e[n]=t[n];return e}function P(e){for(var t={},n=0;n0;X&&X.indexOf(\"android\");var te=X&&/iphone|ipad|ipod|ios/.test(X);X&&/chrome\\/\\d+/.test(X),X&&/phantomjs/.test(X);var ne,re=X&&X.match(/firefox\\/(\\d+)/),ie={}.watch,oe=!1;if(Y)try{var ae={};Object.defineProperty(ae,\"passive\",{get:function(){oe=!0}}),window.addEventListener(\"test-passive\",null,ae)}catch(s){}var se=function(){return void 0===ne&&(ne=!Y&&\"undefined\"!=typeof n.g&&n.g.process&&\"server\"===n.g.process.env.VUE_ENV),ne},ue=Y&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ce(e){return\"function\"==typeof e&&/native code/.test(e.toString())}var le,de=\"undefined\"!=typeof Symbol&&ce(Symbol)&&\"undefined\"!=typeof Reflect&&ce(Reflect.ownKeys);le=\"undefined\"!=typeof Set&&ce(Set)?Set:function(){function e(){(0,i[\"default\"])(this,e),this.set=Object.create(null)}return(0,o[\"default\"])(e,[{key:\"has\",value:function(e){return!0===this.set[e]}},{key:\"add\",value:function(e){this.set[e]=!0}},{key:\"clear\",value:function(){this.set=Object.create(null)}}]),e}();var fe=null;function pe(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;e||fe&&fe._scope.off(),fe=e,e&&e._scope.on()}var he=function(){function e(t,n,r,o,a,s,u,c){(0,i[\"default\"])(this,e),this.tag=t,this.data=n,this.children=r,this.text=o,this.elm=a,this.ns=void 0,this.context=s,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=n&&n.key,this.componentOptions=u,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=c,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return(0,o[\"default\"])(e,[{key:\"child\",get:function(){return this.componentInstance}}]),e}(),ge=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\",t=new he;return t.text=e,t.isComment=!0,t};function me(e){return new he(void 0,void 0,void 0,String(e))}function ve(e){var t=new he(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var _e=0,ye=[],be=function(){function e(){(0,i[\"default\"])(this,e),this._pending=!1,this.id=_e++,this.subs=[]}return(0,o[\"default\"])(e,[{key:\"addSub\",value:function(e){this.subs.push(e)}},{key:\"removeSub\",value:function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,ye.push(this))}},{key:\"depend\",value:function(t){e.target&&e.target.addDep(this)}},{key:\"notify\",value:function(e){for(var t=this.subs.filter((function(e){return e})),n=0,r=t.length;n2&&arguments[2]!==undefined&&arguments[2];if((0,i[\"default\"])(this,e),this.value=t,this.shallow=n,this.mock=r,this.dep=r?Se:new be,this.vmCount=0,W(t,\"__ob__\",this),u(t)){if(!r)if(Z)t.__proto__=Ae;else for(var o=0,a=Ce.length;o","link":"/xing/js/twikoo.min.js"}]}